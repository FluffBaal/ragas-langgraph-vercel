"use strict";(()=>{var e={};e.id=492,e.ids=[492],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9484:e=>{e.exports=import("@langchain/openai")},9812:(e,t,s)=>{s.a(e,async(e,n)=>{try{s.r(t),s.d(t,{originalPathname:()=>g,patchFetch:()=>u,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d});var a=s(9303),r=s(8716),o=s(670),i=s(6746),l=e([i]);i=(l.then?(await l)():l)[0];let c=new a.AppRouteRouteModule({definition:{kind:r.x.APP_ROUTE,page:"/api/status/route",pathname:"/api/status",filename:"route",bundlePath:"app/api/status/route"},resolvedPagePath:"/home/fluff_baal/repos/Aim-Assignment-7-8/Real assignment 07/ragas-langgraph-vercel/src/app/api/status/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:p,staticGenerationAsyncStorage:d,serverHooks:m}=c,g="/api/status/route";function u(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}n()}catch(e){n(e)}})},6746:(e,t,s)=>{s.a(e,async(e,n)=>{try{s.r(t),s.d(t,{GET:()=>l,OPTIONS:()=>c,POST:()=>u});var a=s(7070),r=s(5563),o=s(4235),i=e([r]);async function l(e){try{let t=e.ip||e.headers.get("x-forwarded-for")||"unknown",s={timestamp:new Date().toISOString(),system:{status:"operational",version:"1.0.0",environment:"production",uptime:process.uptime()},services:{openai:{configured:(0,r.g)(),model:"gpt-4.1-mini",status:(0,r.g)()?"available":"not_configured"},rateLimit:{remainingRequests:o.A6.getRemainingRequests(t),windowMs:9e5,maxRequests:100}},features:{evolutionTypes:["simple","multi_context","reasoning"],supportedFormats:[".txt",".md",".pdf"],maxFileSize:"10MB",maxFiles:10,maxQuestions:50},health:{database:"not_applicable",cache:"not_applicable",external_apis:(0,r.g)()?"healthy":"degraded"}},n=(0,r.g)()?"healthy":"degraded";return a.NextResponse.json({...s,overall_status:n},{status:"healthy"===n?200:503,headers:{"Content-Type":"application/json","Cache-Control":"no-cache, no-store, must-revalidate","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, OPTIONS","Access-Control-Allow-Headers":"Content-Type"}})}catch(e){return console.error("Status check error:",e),a.NextResponse.json({timestamp:new Date().toISOString(),overall_status:"error",error:"Failed to retrieve system status",message:e instanceof Error?e.message:"Unknown error"},{status:500,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}})}}async function u(e){try{let t=await e.json(),{action:s}=t;if("ping"===s)return a.NextResponse.json({message:"pong",timestamp:new Date().toISOString(),latency:Date.now()-(t.timestamp||Date.now())},{status:200,headers:{"Access-Control-Allow-Origin":"*"}});if("validate_config"===s){let e={openai:(0,r.g)(),environment:!0,timestamp:new Date().toISOString()};return a.NextResponse.json(e,{status:200,headers:{"Access-Control-Allow-Origin":"*"}})}return a.NextResponse.json({error:"Invalid action. Supported actions: ping, validate_config"},{status:400,headers:{"Access-Control-Allow-Origin":"*"}})}catch(e){return a.NextResponse.json({error:"Invalid request body",message:e instanceof Error?e.message:"Unknown error"},{status:400,headers:{"Access-Control-Allow-Origin":"*"}})}}async function c(){return new a.NextResponse(null,{status:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type","Access-Control-Max-Age":"86400"}})}r=(i.then?(await i)():i)[0],n()}catch(e){n(e)}})},5563:(e,t,s)=>{s.a(e,async(e,n)=>{try{s.d(t,{Q:()=>o,g:()=>i});var a=s(9484),r=e([a]);function o(e){let t=e||process.env.OPENAI_API_KEY;if(!t)throw Error("OpenAI API key is required");return new a.ChatOpenAI({openAIApiKey:t,modelName:"gpt-4.1-mini",temperature:.7,maxTokens:2e3,timeout:6e4,maxRetries:3})}function i(){return!!process.env.OPENAI_API_KEY}a=(r.then?(await r)():r)[0],n()}catch(e){n(e)}})},4235:(e,t,s)=>{s.d(t,{A6:()=>c,D0:()=>i,Lt:()=>r,bS:()=>l});var n=s(1585),a=s(6033);let r=n.Ry({maxQuestions:n.Rx().min(1).max(50).default(10),evolutionTypes:n.IX(n.Km(["simple","multi_context","reasoning"])).default(["simple","multi_context","reasoning"]),complexityTarget:n.Rx().min(1).max(10).default(5),language:n.Z_().default("en"),includeMetadata:n.O7().default(!0),openaiApiKey:n.Z_().optional()});n.Ry({name:n.Z_().min(1),size:n.Rx().max(10485760),type:n.Z_().optional()});let o=n.Ry({content:n.Z_().min(100,"Document content must be at least 100 characters"),metadata:n.IM(n.Yj()).optional()});function i(e){return["txt","md","pdf"].includes(e.name.toLowerCase().split(".").pop()||"")?e.size>10485760?{valid:!1,error:"File too large (max 10MB)"}:{valid:!0}:{valid:!1,error:"Invalid file type. Only .txt, .md, and .pdf files are allowed."}}function l(e){try{return o.parse({content:e}),{valid:!0}}catch(e){if(e instanceof a.jm)return{valid:!1,error:e.errors[0].message};return{valid:!1,error:"Invalid document content"}}}n.Ry({documents:n.IX(o).min(1,"At least one document is required"),config:r.optional()});class u{constructor(e=100,t=9e5){this.maxRequests=e,this.windowMs=t,this.requests=new Map}isAllowed(e){let t=Date.now(),s=(this.requests.get(e)||[]).filter(e=>t-e<this.windowMs);return!(s.length>=this.maxRequests)&&(s.push(t),this.requests.set(e,s),!0)}getRemainingRequests(e){let t=Date.now(),s=(this.requests.get(e)||[]).filter(e=>t-e<this.windowMs);return Math.max(0,this.maxRequests-s.length)}}let c=new u}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),n=t.X(0,[276,972,585],()=>s(9812));module.exports=n})();