"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/generate/route";
exports.ids = ["app/api/generate/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "@langchain/core/documents":
/*!********************************************!*\
  !*** external "@langchain/core/documents" ***!
  \********************************************/
/***/ ((module) => {

module.exports = import("@langchain/core/documents");;

/***/ }),

/***/ "@langchain/core/prompts":
/*!******************************************!*\
  !*** external "@langchain/core/prompts" ***!
  \******************************************/
/***/ ((module) => {

module.exports = import("@langchain/core/prompts");;

/***/ }),

/***/ "@langchain/openai":
/*!************************************!*\
  !*** external "@langchain/openai" ***!
  \************************************/
/***/ ((module) => {

module.exports = import("@langchain/openai");;

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=%2Fhome%2Ffluff_baal%2Frepos%2FAim-Assignment-7-8%2FReal%20assignment%2007%2Fragas-langgraph-vercel%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Ffluff_baal%2Frepos%2FAim-Assignment-7-8%2FReal%20assignment%2007%2Fragas-langgraph-vercel&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=%2Fhome%2Ffluff_baal%2Frepos%2FAim-Assignment-7-8%2FReal%20assignment%2007%2Fragas-langgraph-vercel%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Ffluff_baal%2Frepos%2FAim-Assignment-7-8%2FReal%20assignment%2007%2Fragas-langgraph-vercel&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_fluff_baal_repos_Aim_Assignment_7_8_Real_assignment_07_ragas_langgraph_vercel_src_app_api_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/generate/route.ts */ \"(rsc)/./src/app/api/generate/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_home_fluff_baal_repos_Aim_Assignment_7_8_Real_assignment_07_ragas_langgraph_vercel_src_app_api_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_home_fluff_baal_repos_Aim_Assignment_7_8_Real_assignment_07_ragas_langgraph_vercel_src_app_api_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/generate/route\",\n        pathname: \"/api/generate\",\n        filename: \"route\",\n        bundlePath: \"app/api/generate/route\"\n    },\n    resolvedPagePath: \"/home/fluff_baal/repos/Aim-Assignment-7-8/Real assignment 07/ragas-langgraph-vercel/src/app/api/generate/route.ts\",\n    nextConfigOutput,\n    userland: _home_fluff_baal_repos_Aim_Assignment_7_8_Real_assignment_07_ragas_langgraph_vercel_src_app_api_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/generate/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW5lcmF0ZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGZ2VuZXJhdGUlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZnZW5lcmF0ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGZmx1ZmZfYmFhbCUyRnJlcG9zJTJGQWltLUFzc2lnbm1lbnQtNy04JTJGUmVhbCUyMGFzc2lnbm1lbnQlMjAwNyUyRnJhZ2FzLWxhbmdncmFwaC12ZXJjZWwlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmhvbWUlMkZmbHVmZl9iYWFsJTJGcmVwb3MlMkZBaW0tQXNzaWdubWVudC03LTglMkZSZWFsJTIwYXNzaWdubWVudCUyMDA3JTJGcmFnYXMtbGFuZ2dyYXBoLXZlcmNlbCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDaUU7QUFDOUk7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYWdhcy1sYW5nZ3JhcGgtdmVyY2VsLz80NmIwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9ob21lL2ZsdWZmX2JhYWwvcmVwb3MvQWltLUFzc2lnbm1lbnQtNy04L1JlYWwgYXNzaWdubWVudCAwNy9yYWdhcy1sYW5nZ3JhcGgtdmVyY2VsL3NyYy9hcHAvYXBpL2dlbmVyYXRlL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZW5lcmF0ZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2dlbmVyYXRlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9nZW5lcmF0ZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9ob21lL2ZsdWZmX2JhYWwvcmVwb3MvQWltLUFzc2lnbm1lbnQtNy04L1JlYWwgYXNzaWdubWVudCAwNy9yYWdhcy1sYW5nZ3JhcGgtdmVyY2VsL3NyYy9hcHAvYXBpL2dlbmVyYXRlL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9nZW5lcmF0ZS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=%2Fhome%2Ffluff_baal%2Frepos%2FAim-Assignment-7-8%2FReal%20assignment%2007%2Fragas-langgraph-vercel%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Ffluff_baal%2Frepos%2FAim-Assignment-7-8%2FReal%20assignment%2007%2Fragas-langgraph-vercel&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/generate/route.ts":
/*!***************************************!*\
  !*** ./src/app/api/generate/route.ts ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_ragas_langgraph_implementation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/ragas/langgraph-implementation */ \"(rsc)/./src/lib/ragas/langgraph-implementation.ts\");\n/* harmony import */ var _lib_openai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/openai */ \"(rsc)/./src/lib/openai.ts\");\n/* harmony import */ var _langchain_core_documents__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @langchain/core/documents */ \"@langchain/core/documents\");\n/* harmony import */ var _lib_validation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/validation */ \"(rsc)/./src/lib/validation.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_ragas_langgraph_implementation__WEBPACK_IMPORTED_MODULE_1__, _lib_openai__WEBPACK_IMPORTED_MODULE_2__, _langchain_core_documents__WEBPACK_IMPORTED_MODULE_3__]);\n([_lib_ragas_langgraph_implementation__WEBPACK_IMPORTED_MODULE_1__, _lib_openai__WEBPACK_IMPORTED_MODULE_2__, _langchain_core_documents__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nasync function POST(request) {\n    try {\n        // Rate limiting\n        const clientIP = request.ip || request.headers.get(\"x-forwarded-for\") || \"unknown\";\n        if (!_lib_validation__WEBPACK_IMPORTED_MODULE_4__.globalRateLimiter.isAllowed(clientIP)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Rate limit exceeded. Please try again later.\",\n                remainingRequests: _lib_validation__WEBPACK_IMPORTED_MODULE_4__.globalRateLimiter.getRemainingRequests(clientIP)\n            }, {\n                status: 429\n            });\n        }\n        // Parse multipart form data\n        const formData = await request.formData();\n        const configString = formData.get(\"config\");\n        let config;\n        try {\n            config = JSON.parse(configString || \"{}\");\n        } catch  {\n            config = {};\n        }\n        // Validate configuration\n        const configValidation = _lib_validation__WEBPACK_IMPORTED_MODULE_4__.GenerationConfigSchema.safeParse(config);\n        if (!configValidation.success) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid configuration\",\n                details: configValidation.error.errors\n            }, {\n                status: 400\n            });\n        }\n        const validatedConfig = configValidation.data;\n        // Extract documents\n        const documents = [];\n        let fileIndex = 0;\n        while(true){\n            const file = formData.get(`document_${fileIndex}`);\n            if (!file) break;\n            // Validate file\n            const fileValidation = (0,_lib_validation__WEBPACK_IMPORTED_MODULE_4__.validateFile)(file);\n            if (!fileValidation.valid) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: `File ${file.name}: ${fileValidation.error}`\n                }, {\n                    status: 400\n                });\n            }\n            // Read file with proper encoding handling\n            const buffer = await file.arrayBuffer();\n            const decoder = new TextDecoder(\"utf-8\", {\n                fatal: false\n            });\n            const content = decoder.decode(buffer);\n            const contentValidation = (0,_lib_validation__WEBPACK_IMPORTED_MODULE_4__.validateDocumentContent)(content);\n            if (!contentValidation.valid) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: `File ${file.name}: ${contentValidation.error}`\n                }, {\n                    status: 400\n                });\n            }\n            documents.push(new _langchain_core_documents__WEBPACK_IMPORTED_MODULE_3__.Document({\n                pageContent: content,\n                metadata: {\n                    source: file.name,\n                    size: file.size,\n                    type: file.type,\n                    uploadTimestamp: new Date().toISOString()\n                }\n            }));\n            fileIndex++;\n        }\n        if (documents.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"No valid documents provided\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate OpenAI API key\n        const apiKey = validatedConfig.openaiApiKey || process.env.OPENAI_API_KEY;\n        if (!apiKey) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"OpenAI API key is required. Please provide your API key.\"\n            }, {\n                status: 400\n            });\n        }\n        // Initialize OpenAI client with user's API key\n        const llm = (0,_lib_openai__WEBPACK_IMPORTED_MODULE_2__.createOpenAIClient)(apiKey);\n        // Create and run RAGAS LangGraph\n        const ragasGraph = new _lib_ragas_langgraph_implementation__WEBPACK_IMPORTED_MODULE_1__.RAGASLangGraph(llm);\n        const results = await ragasGraph.run(documents);\n        // Apply configuration filters\n        let filteredResults = {\n            ...results\n        };\n        // Limit number of questions if specified\n        if (validatedConfig.maxQuestions < results.evolved_questions.length) {\n            const limitedQuestions = results.evolved_questions.slice(0, validatedConfig.maxQuestions);\n            const limitedQuestionIds = new Set(limitedQuestions.map((q)=>q.id));\n            filteredResults = {\n                ...results,\n                evolved_questions: limitedQuestions,\n                question_answers: results.question_answers.filter((qa)=>limitedQuestionIds.has(qa.question_id)),\n                question_contexts: results.question_contexts.filter((qc)=>limitedQuestionIds.has(qc.question_id)),\n                generation_metadata: {\n                    ...results.generation_metadata,\n                    total_questions: limitedQuestions.length,\n                    evolution_types_count: {\n                        simple: limitedQuestions.filter((q)=>q.evolution_type === \"simple\").length,\n                        multi_context: limitedQuestions.filter((q)=>q.evolution_type === \"multi_context\").length,\n                        reasoning: limitedQuestions.filter((q)=>q.evolution_type === \"reasoning\").length\n                    }\n                }\n            };\n        }\n        // Filter by evolution types if specified\n        if (validatedConfig.evolutionTypes.length < 3) {\n            const allowedTypes = new Set(validatedConfig.evolutionTypes);\n            const filteredQuestions = filteredResults.evolved_questions.filter((q)=>allowedTypes.has(q.evolution_type));\n            const filteredQuestionIds = new Set(filteredQuestions.map((q)=>q.id));\n            filteredResults = {\n                ...filteredResults,\n                evolved_questions: filteredQuestions,\n                question_answers: filteredResults.question_answers.filter((qa)=>filteredQuestionIds.has(qa.question_id)),\n                question_contexts: filteredResults.question_contexts.filter((qc)=>filteredQuestionIds.has(qc.question_id)),\n                generation_metadata: {\n                    ...filteredResults.generation_metadata,\n                    total_questions: filteredQuestions.length,\n                    evolution_types_count: {\n                        simple: filteredQuestions.filter((q)=>q.evolution_type === \"simple\").length,\n                        multi_context: filteredQuestions.filter((q)=>q.evolution_type === \"multi_context\").length,\n                        reasoning: filteredQuestions.filter((q)=>q.evolution_type === \"reasoning\").length\n                    }\n                }\n            };\n        }\n        // Return results\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(filteredResults, {\n            status: 200,\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Cache-Control\": \"no-cache\",\n                \"Access-Control-Allow-Origin\": \"*\",\n                \"Access-Control-Allow-Methods\": \"POST, OPTIONS\",\n                \"Access-Control-Allow-Headers\": \"Content-Type\"\n            }\n        });\n    } catch (error) {\n        console.error(\"Generation error:\", error);\n        if (error instanceof Error) {\n            if (error.message.includes(\"rate limit\")) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Rate limit exceeded. Please try again later.\"\n                }, {\n                    status: 429\n                });\n            }\n            if (error.message.includes(\"token limit\") || error.message.includes(\"context length\")) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Document too large. Please reduce document size.\"\n                }, {\n                    status: 413\n                });\n            }\n            if (error.message.includes(\"API key\") || error.message.includes(\"authentication\")) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"OpenAI API configuration error.\"\n                }, {\n                    status: 500\n                });\n            }\n            if (error.message.includes(\"timeout\")) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Request timeout. Please try again with smaller documents.\"\n                }, {\n                    status: 408\n                });\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\",\n            message:  true ? error instanceof Error ? error.message : \"Unknown error\" : 0\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET() {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        message: \"RAGAS LangGraph Generation API\",\n        version: \"1.0.0\",\n        status: \"operational\",\n        endpoints: {\n            POST: \"Generate synthetic data from documents\",\n            GET: \"API information\"\n        },\n        limits: {\n            maxFileSize: \"10MB\",\n            maxFiles: 10,\n            supportedFormats: [\n                \".txt\",\n                \".md\",\n                \".pdf\"\n            ]\n        }\n    }, {\n        status: 200,\n        headers: {\n            \"Access-Control-Allow-Origin\": \"*\",\n            \"Access-Control-Allow-Methods\": \"GET, POST, OPTIONS\",\n            \"Access-Control-Allow-Headers\": \"Content-Type\"\n        }\n    });\n}\nasync function OPTIONS() {\n    return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n        status: 200,\n        headers: {\n            \"Access-Control-Allow-Origin\": \"*\",\n            \"Access-Control-Allow-Methods\": \"GET, POST, OPTIONS\",\n            \"Access-Control-Allow-Headers\": \"Content-Type\",\n            \"Access-Control-Max-Age\": \"86400\"\n        }\n    });\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDakYsT0FBT2hHLHFEQUFZQSxDQUFDZSxJQUFJLENBQ3RCO29CQUFFQyxPQUFPO2dCQUFrQyxHQUMzQztvQkFBRUcsUUFBUTtnQkFBSTtZQUVsQjtZQUVBLElBQUlILE1BQU0rRSxPQUFPLENBQUNDLFFBQVEsQ0FBQyxZQUFZO2dCQUNyQyxPQUFPaEcscURBQVlBLENBQUNlLElBQUksQ0FDdEI7b0JBQUVDLE9BQU87Z0JBQTRELEdBQ3JFO29CQUFFRyxRQUFRO2dCQUFJO1lBRWxCO1FBQ0Y7UUFFQSxPQUFPbkIscURBQVlBLENBQUNlLElBQUksQ0FDdEI7WUFDRUMsT0FBTztZQUNQK0UsU0FBU3JDLEtBQXlCLEdBQWdCMUMsaUJBQWlCOEUsUUFBUTlFLE1BQU0rRSxPQUFPLEdBQUcsa0JBQWtCRSxDQUFTQTtRQUN4SCxHQUNBO1lBQUU5RSxRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVPLGVBQWUrRTtJQUNwQixPQUFPbEcscURBQVlBLENBQUNlLElBQUksQ0FDdEI7UUFDRWdGLFNBQVM7UUFDVEksU0FBUztRQUNUaEYsUUFBUTtRQUNSaUYsV0FBVztZQUNUNUYsTUFBTTtZQUNOMEYsS0FBSztRQUNQO1FBQ0FHLFFBQVE7WUFDTkMsYUFBYTtZQUNiQyxVQUFVO1lBQ1ZDLGtCQUFrQjtnQkFBQztnQkFBUTtnQkFBTzthQUFPO1FBQzNDO0lBQ0YsR0FDQTtRQUNFckYsUUFBUTtRQUNSUCxTQUFTO1lBQ1AsK0JBQStCO1lBQy9CLGdDQUFnQztZQUNoQyxnQ0FBZ0M7UUFDbEM7SUFDRjtBQUVKO0FBRU8sZUFBZTZGO0lBQ3BCLE9BQU8sSUFBSXpHLHFEQUFZQSxDQUFDLE1BQU07UUFDNUJtQixRQUFRO1FBQ1JQLFNBQVM7WUFDUCwrQkFBK0I7WUFDL0IsZ0NBQWdDO1lBQ2hDLGdDQUFnQztZQUNoQywwQkFBMEI7UUFDNUI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmFnYXMtbGFuZ2dyYXBoLXZlcmNlbC8uL3NyYy9hcHAvYXBpL2dlbmVyYXRlL3JvdXRlLnRzPzkxZGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IFJBR0FTTGFuZ0dyYXBoIH0gZnJvbSAnQC9saWIvcmFnYXMvbGFuZ2dyYXBoLWltcGxlbWVudGF0aW9uJztcbmltcG9ydCB7IGNyZWF0ZU9wZW5BSUNsaWVudCB9IGZyb20gJ0AvbGliL29wZW5haSc7XG5pbXBvcnQgeyBEb2N1bWVudCB9IGZyb20gJ0BsYW5nY2hhaW4vY29yZS9kb2N1bWVudHMnO1xuaW1wb3J0IHsgXG4gIEdlbmVyYXRpb25Db25maWdTY2hlbWEsIFxuICB2YWxpZGF0ZUZpbGUsIFxuICB2YWxpZGF0ZURvY3VtZW50Q29udGVudCxcbiAgZ2xvYmFsUmF0ZUxpbWl0ZXIgXG59IGZyb20gJ0AvbGliL3ZhbGlkYXRpb24nO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIC8vIFJhdGUgbGltaXRpbmdcbiAgICBjb25zdCBjbGllbnRJUCA9IHJlcXVlc3QuaXAgfHwgcmVxdWVzdC5oZWFkZXJzLmdldCgneC1mb3J3YXJkZWQtZm9yJykgfHwgJ3Vua25vd24nO1xuICAgIGlmICghZ2xvYmFsUmF0ZUxpbWl0ZXIuaXNBbGxvd2VkKGNsaWVudElQKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IFxuICAgICAgICAgIGVycm9yOiAnUmF0ZSBsaW1pdCBleGNlZWRlZC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxuICAgICAgICAgIHJlbWFpbmluZ1JlcXVlc3RzOiBnbG9iYWxSYXRlTGltaXRlci5nZXRSZW1haW5pbmdSZXF1ZXN0cyhjbGllbnRJUClcbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQyOSB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFBhcnNlIG11bHRpcGFydCBmb3JtIGRhdGFcbiAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IHJlcXVlc3QuZm9ybURhdGEoKTtcbiAgICBjb25zdCBjb25maWdTdHJpbmcgPSBmb3JtRGF0YS5nZXQoJ2NvbmZpZycpIGFzIHN0cmluZztcbiAgICBcbiAgICBsZXQgY29uZmlnO1xuICAgIHRyeSB7XG4gICAgICBjb25maWcgPSBKU09OLnBhcnNlKGNvbmZpZ1N0cmluZyB8fCAne30nKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIGNvbmZpZyA9IHt9O1xuICAgIH1cbiAgICBcbiAgICAvLyBWYWxpZGF0ZSBjb25maWd1cmF0aW9uXG4gICAgY29uc3QgY29uZmlnVmFsaWRhdGlvbiA9IEdlbmVyYXRpb25Db25maWdTY2hlbWEuc2FmZVBhcnNlKGNvbmZpZyk7XG4gICAgaWYgKCFjb25maWdWYWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBcbiAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgY29uZmlndXJhdGlvbicsXG4gICAgICAgICAgZGV0YWlsczogY29uZmlnVmFsaWRhdGlvbi5lcnJvci5lcnJvcnNcbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB2YWxpZGF0ZWRDb25maWcgPSBjb25maWdWYWxpZGF0aW9uLmRhdGE7XG4gICAgXG4gICAgLy8gRXh0cmFjdCBkb2N1bWVudHNcbiAgICBjb25zdCBkb2N1bWVudHM6IERvY3VtZW50W10gPSBbXTtcbiAgICBsZXQgZmlsZUluZGV4ID0gMDtcbiAgICBcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgY29uc3QgZmlsZSA9IGZvcm1EYXRhLmdldChgZG9jdW1lbnRfJHtmaWxlSW5kZXh9YCkgYXMgRmlsZTtcbiAgICAgIGlmICghZmlsZSkgYnJlYWs7XG4gICAgICBcbiAgICAgIC8vIFZhbGlkYXRlIGZpbGVcbiAgICAgIGNvbnN0IGZpbGVWYWxpZGF0aW9uID0gdmFsaWRhdGVGaWxlKGZpbGUpO1xuICAgICAgaWYgKCFmaWxlVmFsaWRhdGlvbi52YWxpZCkge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBlcnJvcjogYEZpbGUgJHtmaWxlLm5hbWV9OiAke2ZpbGVWYWxpZGF0aW9uLmVycm9yfWAgfSxcbiAgICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmVhZCBmaWxlIHdpdGggcHJvcGVyIGVuY29kaW5nIGhhbmRsaW5nXG4gICAgICBjb25zdCBidWZmZXIgPSBhd2FpdCBmaWxlLmFycmF5QnVmZmVyKCk7XG4gICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcsIHsgZmF0YWw6IGZhbHNlIH0pO1xuICAgICAgY29uc3QgY29udGVudCA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlcik7XG4gICAgICBjb25zdCBjb250ZW50VmFsaWRhdGlvbiA9IHZhbGlkYXRlRG9jdW1lbnRDb250ZW50KGNvbnRlbnQpO1xuICAgICAgaWYgKCFjb250ZW50VmFsaWRhdGlvbi52YWxpZCkge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBlcnJvcjogYEZpbGUgJHtmaWxlLm5hbWV9OiAke2NvbnRlbnRWYWxpZGF0aW9uLmVycm9yfWAgfSxcbiAgICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgZG9jdW1lbnRzLnB1c2gobmV3IERvY3VtZW50KHtcbiAgICAgICAgcGFnZUNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgc291cmNlOiBmaWxlLm5hbWUsXG4gICAgICAgICAgc2l6ZTogZmlsZS5zaXplLFxuICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgICB1cGxvYWRUaW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgICBcbiAgICAgIGZpbGVJbmRleCsrO1xuICAgIH1cbiAgICBcbiAgICBpZiAoZG9jdW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnTm8gdmFsaWQgZG9jdW1lbnRzIHByb3ZpZGVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIC8vIFZhbGlkYXRlIE9wZW5BSSBBUEkga2V5XG4gICAgY29uc3QgYXBpS2V5ID0gdmFsaWRhdGVkQ29uZmlnLm9wZW5haUFwaUtleSB8fCBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWTtcbiAgICBpZiAoIWFwaUtleSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnT3BlbkFJIEFQSSBrZXkgaXMgcmVxdWlyZWQuIFBsZWFzZSBwcm92aWRlIHlvdXIgQVBJIGtleS4nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG4gICAgXG4gICAgLy8gSW5pdGlhbGl6ZSBPcGVuQUkgY2xpZW50IHdpdGggdXNlcidzIEFQSSBrZXlcbiAgICBjb25zdCBsbG0gPSBjcmVhdGVPcGVuQUlDbGllbnQoYXBpS2V5KTtcbiAgICBcbiAgICAvLyBDcmVhdGUgYW5kIHJ1biBSQUdBUyBMYW5nR3JhcGhcbiAgICBjb25zdCByYWdhc0dyYXBoID0gbmV3IFJBR0FTTGFuZ0dyYXBoKGxsbSk7XG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHJhZ2FzR3JhcGgucnVuKGRvY3VtZW50cyk7XG4gICAgXG4gICAgLy8gQXBwbHkgY29uZmlndXJhdGlvbiBmaWx0ZXJzXG4gICAgbGV0IGZpbHRlcmVkUmVzdWx0cyA9IHsgLi4ucmVzdWx0cyB9O1xuICAgIFxuICAgIC8vIExpbWl0IG51bWJlciBvZiBxdWVzdGlvbnMgaWYgc3BlY2lmaWVkXG4gICAgaWYgKHZhbGlkYXRlZENvbmZpZy5tYXhRdWVzdGlvbnMgPCByZXN1bHRzLmV2b2x2ZWRfcXVlc3Rpb25zLmxlbmd0aCkge1xuICAgICAgY29uc3QgbGltaXRlZFF1ZXN0aW9ucyA9IHJlc3VsdHMuZXZvbHZlZF9xdWVzdGlvbnMuc2xpY2UoMCwgdmFsaWRhdGVkQ29uZmlnLm1heFF1ZXN0aW9ucyk7XG4gICAgICBjb25zdCBsaW1pdGVkUXVlc3Rpb25JZHMgPSBuZXcgU2V0KGxpbWl0ZWRRdWVzdGlvbnMubWFwKHEgPT4gcS5pZCkpO1xuICAgICAgXG4gICAgICBmaWx0ZXJlZFJlc3VsdHMgPSB7XG4gICAgICAgIC4uLnJlc3VsdHMsXG4gICAgICAgIGV2b2x2ZWRfcXVlc3Rpb25zOiBsaW1pdGVkUXVlc3Rpb25zLFxuICAgICAgICBxdWVzdGlvbl9hbnN3ZXJzOiByZXN1bHRzLnF1ZXN0aW9uX2Fuc3dlcnMuZmlsdGVyKHFhID0+IGxpbWl0ZWRRdWVzdGlvbklkcy5oYXMocWEucXVlc3Rpb25faWQpKSxcbiAgICAgICAgcXVlc3Rpb25fY29udGV4dHM6IHJlc3VsdHMucXVlc3Rpb25fY29udGV4dHMuZmlsdGVyKHFjID0+IGxpbWl0ZWRRdWVzdGlvbklkcy5oYXMocWMucXVlc3Rpb25faWQpKSxcbiAgICAgICAgZ2VuZXJhdGlvbl9tZXRhZGF0YToge1xuICAgICAgICAgIC4uLnJlc3VsdHMuZ2VuZXJhdGlvbl9tZXRhZGF0YSxcbiAgICAgICAgICB0b3RhbF9xdWVzdGlvbnM6IGxpbWl0ZWRRdWVzdGlvbnMubGVuZ3RoLFxuICAgICAgICAgIGV2b2x1dGlvbl90eXBlc19jb3VudDoge1xuICAgICAgICAgICAgc2ltcGxlOiBsaW1pdGVkUXVlc3Rpb25zLmZpbHRlcihxID0+IHEuZXZvbHV0aW9uX3R5cGUgPT09ICdzaW1wbGUnKS5sZW5ndGgsXG4gICAgICAgICAgICBtdWx0aV9jb250ZXh0OiBsaW1pdGVkUXVlc3Rpb25zLmZpbHRlcihxID0+IHEuZXZvbHV0aW9uX3R5cGUgPT09ICdtdWx0aV9jb250ZXh0JykubGVuZ3RoLFxuICAgICAgICAgICAgcmVhc29uaW5nOiBsaW1pdGVkUXVlc3Rpb25zLmZpbHRlcihxID0+IHEuZXZvbHV0aW9uX3R5cGUgPT09ICdyZWFzb25pbmcnKS5sZW5ndGhcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIC8vIEZpbHRlciBieSBldm9sdXRpb24gdHlwZXMgaWYgc3BlY2lmaWVkXG4gICAgaWYgKHZhbGlkYXRlZENvbmZpZy5ldm9sdXRpb25UeXBlcy5sZW5ndGggPCAzKSB7XG4gICAgICBjb25zdCBhbGxvd2VkVHlwZXMgPSBuZXcgU2V0KHZhbGlkYXRlZENvbmZpZy5ldm9sdXRpb25UeXBlcyk7XG4gICAgICBjb25zdCBmaWx0ZXJlZFF1ZXN0aW9ucyA9IGZpbHRlcmVkUmVzdWx0cy5ldm9sdmVkX3F1ZXN0aW9ucy5maWx0ZXIocSA9PiBhbGxvd2VkVHlwZXMuaGFzKHEuZXZvbHV0aW9uX3R5cGUpKTtcbiAgICAgIGNvbnN0IGZpbHRlcmVkUXVlc3Rpb25JZHMgPSBuZXcgU2V0KGZpbHRlcmVkUXVlc3Rpb25zLm1hcChxID0+IHEuaWQpKTtcbiAgICAgIFxuICAgICAgZmlsdGVyZWRSZXN1bHRzID0ge1xuICAgICAgICAuLi5maWx0ZXJlZFJlc3VsdHMsXG4gICAgICAgIGV2b2x2ZWRfcXVlc3Rpb25zOiBmaWx0ZXJlZFF1ZXN0aW9ucyxcbiAgICAgICAgcXVlc3Rpb25fYW5zd2VyczogZmlsdGVyZWRSZXN1bHRzLnF1ZXN0aW9uX2Fuc3dlcnMuZmlsdGVyKHFhID0+IGZpbHRlcmVkUXVlc3Rpb25JZHMuaGFzKHFhLnF1ZXN0aW9uX2lkKSksXG4gICAgICAgIHF1ZXN0aW9uX2NvbnRleHRzOiBmaWx0ZXJlZFJlc3VsdHMucXVlc3Rpb25fY29udGV4dHMuZmlsdGVyKHFjID0+IGZpbHRlcmVkUXVlc3Rpb25JZHMuaGFzKHFjLnF1ZXN0aW9uX2lkKSksXG4gICAgICAgIGdlbmVyYXRpb25fbWV0YWRhdGE6IHtcbiAgICAgICAgICAuLi5maWx0ZXJlZFJlc3VsdHMuZ2VuZXJhdGlvbl9tZXRhZGF0YSxcbiAgICAgICAgICB0b3RhbF9xdWVzdGlvbnM6IGZpbHRlcmVkUXVlc3Rpb25zLmxlbmd0aCxcbiAgICAgICAgICBldm9sdXRpb25fdHlwZXNfY291bnQ6IHtcbiAgICAgICAgICAgIHNpbXBsZTogZmlsdGVyZWRRdWVzdGlvbnMuZmlsdGVyKHEgPT4gcS5ldm9sdXRpb25fdHlwZSA9PT0gJ3NpbXBsZScpLmxlbmd0aCxcbiAgICAgICAgICAgIG11bHRpX2NvbnRleHQ6IGZpbHRlcmVkUXVlc3Rpb25zLmZpbHRlcihxID0+IHEuZXZvbHV0aW9uX3R5cGUgPT09ICdtdWx0aV9jb250ZXh0JykubGVuZ3RoLFxuICAgICAgICAgICAgcmVhc29uaW5nOiBmaWx0ZXJlZFF1ZXN0aW9ucy5maWx0ZXIocSA9PiBxLmV2b2x1dGlvbl90eXBlID09PSAncmVhc29uaW5nJykubGVuZ3RoXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICAvLyBSZXR1cm4gcmVzdWx0c1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihmaWx0ZXJlZFJlc3VsdHMsIHtcbiAgICAgIHN0YXR1czogMjAwLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAnQ2FjaGUtQ29udHJvbCc6ICduby1jYWNoZScsXG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXG4gICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ1BPU1QsIE9QVElPTlMnLFxuICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycyc6ICdDb250ZW50LVR5cGUnXG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignR2VuZXJhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdyYXRlIGxpbWl0JykpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgZXJyb3I6ICdSYXRlIGxpbWl0IGV4Y2VlZGVkLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicgfSxcbiAgICAgICAgICB7IHN0YXR1czogNDI5IH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ3Rva2VuIGxpbWl0JykgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnY29udGV4dCBsZW5ndGgnKSkge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBlcnJvcjogJ0RvY3VtZW50IHRvbyBsYXJnZS4gUGxlYXNlIHJlZHVjZSBkb2N1bWVudCBzaXplLicgfSxcbiAgICAgICAgICB7IHN0YXR1czogNDEzIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0FQSSBrZXknKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdhdXRoZW50aWNhdGlvbicpKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICB7IGVycm9yOiAnT3BlbkFJIEFQSSBjb25maWd1cmF0aW9uIGVycm9yLicgfSxcbiAgICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ3RpbWVvdXQnKSkge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBlcnJvcjogJ1JlcXVlc3QgdGltZW91dC4gUGxlYXNlIHRyeSBhZ2FpbiB3aXRoIHNtYWxsZXIgZG9jdW1lbnRzLicgfSxcbiAgICAgICAgICB7IHN0YXR1czogNDA4IH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBcbiAgICAgICAgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLFxuICAgICAgICBtZXNzYWdlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InIDogdW5kZWZpbmVkXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgeyBcbiAgICAgIG1lc3NhZ2U6ICdSQUdBUyBMYW5nR3JhcGggR2VuZXJhdGlvbiBBUEknLFxuICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgIHN0YXR1czogJ29wZXJhdGlvbmFsJyxcbiAgICAgIGVuZHBvaW50czoge1xuICAgICAgICBQT1NUOiAnR2VuZXJhdGUgc3ludGhldGljIGRhdGEgZnJvbSBkb2N1bWVudHMnLFxuICAgICAgICBHRVQ6ICdBUEkgaW5mb3JtYXRpb24nXG4gICAgICB9LFxuICAgICAgbGltaXRzOiB7XG4gICAgICAgIG1heEZpbGVTaXplOiAnMTBNQicsXG4gICAgICAgIG1heEZpbGVzOiAxMCxcbiAgICAgICAgc3VwcG9ydGVkRm9ybWF0czogWycudHh0JywgJy5tZCcsICcucGRmJ11cbiAgICAgIH1cbiAgICB9LFxuICAgIHsgXG4gICAgICBzdGF0dXM6IDIwMCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcqJyxcbiAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnOiAnR0VULCBQT1NULCBPUFRJT05TJyxcbiAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ29udGVudC1UeXBlJ1xuICAgICAgfVxuICAgIH1cbiAgKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIE9QVElPTlMoKSB7XG4gIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKG51bGwsIHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogJyonLFxuICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnOiAnR0VULCBQT1NULCBPUFRJT05TJyxcbiAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJ0NvbnRlbnQtVHlwZScsXG4gICAgICAnQWNjZXNzLUNvbnRyb2wtTWF4LUFnZSc6ICc4NjQwMCdcbiAgICB9XG4gIH0pO1xufVxuXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiUkFHQVNMYW5nR3JhcGgiLCJjcmVhdGVPcGVuQUlDbGllbnQiLCJEb2N1bWVudCIsIkdlbmVyYXRpb25Db25maWdTY2hlbWEiLCJ2YWxpZGF0ZUZpbGUiLCJ2YWxpZGF0ZURvY3VtZW50Q29udGVudCIsImdsb2JhbFJhdGVMaW1pdGVyIiwiUE9TVCIsInJlcXVlc3QiLCJjbGllbnRJUCIsImlwIiwiaGVhZGVycyIsImdldCIsImlzQWxsb3dlZCIsImpzb24iLCJlcnJvciIsInJlbWFpbmluZ1JlcXVlc3RzIiwiZ2V0UmVtYWluaW5nUmVxdWVzdHMiLCJzdGF0dXMiLCJmb3JtRGF0YSIsImNvbmZpZ1N0cmluZyIsImNvbmZpZyIsIkpTT04iLCJwYXJzZSIsImNvbmZpZ1ZhbGlkYXRpb24iLCJzYWZlUGFyc2UiLCJzdWNjZXNzIiwiZGV0YWlscyIsImVycm9ycyIsInZhbGlkYXRlZENvbmZpZyIsImRhdGEiLCJkb2N1bWVudHMiLCJmaWxlSW5kZXgiLCJmaWxlIiwiZmlsZVZhbGlkYXRpb24iLCJ2YWxpZCIsIm5hbWUiLCJidWZmZXIiLCJhcnJheUJ1ZmZlciIsImRlY29kZXIiLCJUZXh0RGVjb2RlciIsImZhdGFsIiwiY29udGVudCIsImRlY29kZSIsImNvbnRlbnRWYWxpZGF0aW9uIiwicHVzaCIsInBhZ2VDb250ZW50IiwibWV0YWRhdGEiLCJzb3VyY2UiLCJzaXplIiwidHlwZSIsInVwbG9hZFRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImxlbmd0aCIsImFwaUtleSIsIm9wZW5haUFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsImxsbSIsInJhZ2FzR3JhcGgiLCJyZXN1bHRzIiwicnVuIiwiZmlsdGVyZWRSZXN1bHRzIiwibWF4UXVlc3Rpb25zIiwiZXZvbHZlZF9xdWVzdGlvbnMiLCJsaW1pdGVkUXVlc3Rpb25zIiwic2xpY2UiLCJsaW1pdGVkUXVlc3Rpb25JZHMiLCJTZXQiLCJtYXAiLCJxIiwiaWQiLCJxdWVzdGlvbl9hbnN3ZXJzIiwiZmlsdGVyIiwicWEiLCJoYXMiLCJxdWVzdGlvbl9pZCIsInF1ZXN0aW9uX2NvbnRleHRzIiwicWMiLCJnZW5lcmF0aW9uX21ldGFkYXRhIiwidG90YWxfcXVlc3Rpb25zIiwiZXZvbHV0aW9uX3R5cGVzX2NvdW50Iiwic2ltcGxlIiwiZXZvbHV0aW9uX3R5cGUiLCJtdWx0aV9jb250ZXh0IiwicmVhc29uaW5nIiwiZXZvbHV0aW9uVHlwZXMiLCJhbGxvd2VkVHlwZXMiLCJmaWx0ZXJlZFF1ZXN0aW9ucyIsImZpbHRlcmVkUXVlc3Rpb25JZHMiLCJjb25zb2xlIiwiRXJyb3IiLCJtZXNzYWdlIiwiaW5jbHVkZXMiLCJ1bmRlZmluZWQiLCJHRVQiLCJ2ZXJzaW9uIiwiZW5kcG9pbnRzIiwibGltaXRzIiwibWF4RmlsZVNpemUiLCJtYXhGaWxlcyIsInN1cHBvcnRlZEZvcm1hdHMiLCJPUFRJT05TIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/generate/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/openai.ts":
/*!***************************!*\
  !*** ./src/lib/openai.ts ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createOpenAIClient: () => (/* binding */ createOpenAIClient),\n/* harmony export */   validateOpenAIConfig: () => (/* binding */ validateOpenAIConfig)\n/* harmony export */ });\n/* harmony import */ var _langchain_openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/openai */ \"@langchain/openai\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_langchain_openai__WEBPACK_IMPORTED_MODULE_0__]);\n_langchain_openai__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nfunction createOpenAIClient(userApiKey) {\n    const apiKey = userApiKey || process.env.OPENAI_API_KEY;\n    if (!apiKey) {\n        throw new Error(\"OpenAI API key is required\");\n    }\n    return new _langchain_openai__WEBPACK_IMPORTED_MODULE_0__.ChatOpenAI({\n        openAIApiKey: apiKey,\n        modelName: \"gpt-4.1-mini\" || 0,\n        temperature: 0.7,\n        maxTokens: 2000,\n        timeout: 60000,\n        maxRetries: 3\n    });\n}\nfunction validateOpenAIConfig() {\n    return !!process.env.OPENAI_API_KEY;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL29wZW5haS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBK0M7QUFFeEMsU0FBU0MsbUJBQW1CQyxVQUFtQjtJQUNwRCxNQUFNQyxTQUFTRCxjQUFjRSxRQUFRQyxHQUFHLENBQUNDLGNBQWM7SUFFdkQsSUFBSSxDQUFDSCxRQUFRO1FBQ1gsTUFBTSxJQUFJSSxNQUFNO0lBQ2xCO0lBRUEsT0FBTyxJQUFJUCx5REFBVUEsQ0FBQztRQUNwQlEsY0FBY0w7UUFDZE0sV0FBV0wsY0FBd0IsSUFBSTtRQUN2Q08sYUFBYTtRQUNiQyxXQUFXO1FBQ1hDLFNBQVM7UUFDVEMsWUFBWTtJQUNkO0FBQ0Y7QUFFTyxTQUFTQztJQUNkLE9BQU8sQ0FBQyxDQUFDWCxRQUFRQyxHQUFHLENBQUNDLGNBQWM7QUFDckMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYWdhcy1sYW5nZ3JhcGgtdmVyY2VsLy4vc3JjL2xpYi9vcGVuYWkudHM/YTVjNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGF0T3BlbkFJIH0gZnJvbSAnQGxhbmdjaGFpbi9vcGVuYWknO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3BlbkFJQ2xpZW50KHVzZXJBcGlLZXk/OiBzdHJpbmcpOiBDaGF0T3BlbkFJIHtcbiAgY29uc3QgYXBpS2V5ID0gdXNlckFwaUtleSB8fCBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWTtcbiAgXG4gIGlmICghYXBpS2V5KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdPcGVuQUkgQVBJIGtleSBpcyByZXF1aXJlZCcpO1xuICB9XG4gIFxuICByZXR1cm4gbmV3IENoYXRPcGVuQUkoe1xuICAgIG9wZW5BSUFwaUtleTogYXBpS2V5LFxuICAgIG1vZGVsTmFtZTogcHJvY2Vzcy5lbnYuT1BFTkFJX01PREVMIHx8ICdncHQtNC4xLW1pbmknLFxuICAgIHRlbXBlcmF0dXJlOiAwLjcsXG4gICAgbWF4VG9rZW5zOiAyMDAwLFxuICAgIHRpbWVvdXQ6IDYwMDAwLFxuICAgIG1heFJldHJpZXM6IDMsXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVPcGVuQUlDb25maWcoKTogYm9vbGVhbiB7XG4gIHJldHVybiAhIXByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZO1xufVxuXG4iXSwibmFtZXMiOlsiQ2hhdE9wZW5BSSIsImNyZWF0ZU9wZW5BSUNsaWVudCIsInVzZXJBcGlLZXkiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJFcnJvciIsIm9wZW5BSUFwaUtleSIsIm1vZGVsTmFtZSIsIk9QRU5BSV9NT0RFTCIsInRlbXBlcmF0dXJlIiwibWF4VG9rZW5zIiwidGltZW91dCIsIm1heFJldHJpZXMiLCJ2YWxpZGF0ZU9wZW5BSUNvbmZpZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/openai.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/ragas/langgraph-implementation.ts":
/*!***************************************************!*\
  !*** ./src/lib/ragas/langgraph-implementation.ts ***!
  \***************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RAGASLangGraph: () => (/* binding */ RAGASLangGraph)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_prompts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/prompts */ \"@langchain/core/prompts\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_langchain_core_prompts__WEBPACK_IMPORTED_MODULE_0__]);\n_langchain_core_prompts__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n// Simple graph implementation without external langgraph dependency\nclass SimpleGraph {\n    addNode(name, func) {\n        this.nodes.set(name, func);\n    }\n    addEdge(from, to) {\n        this.edges.set(from, to);\n    }\n    setStart(node) {\n        this.startNode = node;\n    }\n    async invoke(initialState) {\n        let currentState = {\n            ...initialState\n        };\n        let currentNode = this.startNode;\n        while(currentNode && currentNode !== \"END\"){\n            const nodeFunc = this.nodes.get(currentNode);\n            if (!nodeFunc) {\n                throw new Error(`Node ${currentNode} not found`);\n            }\n            const partialState = await nodeFunc(currentState);\n            currentState = {\n                ...currentState,\n                ...partialState\n            };\n            currentNode = this.edges.get(currentNode) || \"END\";\n        }\n        return currentState;\n    }\n    constructor(){\n        this.nodes = new Map();\n        this.edges = new Map();\n        this.startNode = \"\";\n    }\n}\n// Main LangGraph Implementation\nclass RAGASLangGraph {\n    constructor(llm){\n        this.llm = llm;\n        this.graph = this.createGraph();\n    }\n    createGraph() {\n        const workflow = new SimpleGraph();\n        // Add nodes\n        workflow.addNode(\"process_documents\", this.processDocuments.bind(this));\n        workflow.addNode(\"simple_evolution\", this.simpleEvolution.bind(this));\n        workflow.addNode(\"multi_context_evolution\", this.multiContextEvolution.bind(this));\n        workflow.addNode(\"reasoning_evolution\", this.reasoningEvolution.bind(this));\n        workflow.addNode(\"generate_answers\", this.generateAnswers.bind(this));\n        workflow.addNode(\"retrieve_contexts\", this.retrieveContexts.bind(this));\n        // Define edges\n        workflow.setStart(\"process_documents\");\n        workflow.addEdge(\"process_documents\", \"simple_evolution\");\n        workflow.addEdge(\"simple_evolution\", \"multi_context_evolution\");\n        workflow.addEdge(\"multi_context_evolution\", \"reasoning_evolution\");\n        workflow.addEdge(\"reasoning_evolution\", \"generate_answers\");\n        workflow.addEdge(\"generate_answers\", \"retrieve_contexts\");\n        workflow.addEdge(\"retrieve_contexts\", \"END\");\n        return workflow;\n    }\n    // Document Processing Agent\n    async processDocuments(state) {\n        const processed_docs = [];\n        for(let i = 0; i < state.documents.length; i++){\n            const doc = state.documents[i];\n            try {\n                const questions = await this.extractInitialQuestions(doc.pageContent);\n                processed_docs.push({\n                    id: `doc_${i}`,\n                    content: doc.pageContent,\n                    metadata: doc.metadata,\n                    initial_questions: questions\n                });\n            } catch (error) {\n                state.errors.push(`Document processing error: ${error}`);\n            }\n        }\n        return {\n            processed_docs\n        };\n    }\n    async extractInitialQuestions(content) {\n        const prompt = _langchain_core_prompts__WEBPACK_IMPORTED_MODULE_0__.ChatPromptTemplate.fromTemplate(`\n      Based on the following content, generate 3 basic comprehension questions.\n      Return only the questions, one per line, without numbering.\n      \n      Content: {content}\n    `);\n        try {\n            const chain = prompt.pipe(this.llm);\n            // Use more content but skip header lines if present\n            const contentLines = content.split(\"\\n\");\n            let mainContent = content;\n            // Skip metadata/header lines at the beginning\n            let startIndex = 0;\n            for(let i = 0; i < Math.min(10, contentLines.length); i++){\n                const line = contentLines[i].trim();\n                if (line.match(/^(Date|Version|Author|License|Table of Contents):/i) || line.match(/^#+\\s*$/) || line.length < 10) {\n                    startIndex = i + 1;\n                } else {\n                    break;\n                }\n            }\n            if (startIndex > 0) {\n                mainContent = contentLines.slice(startIndex).join(\"\\n\");\n            }\n            const response = await chain.invoke({\n                content: mainContent.slice(0, 4000)\n            });\n            const questions = response.content.toString().split(\"\\n\").map((q)=>q.trim()).filter((q)=>q && q.endsWith(\"?\")).slice(0, 3);\n            return questions.length > 0 ? questions : [\n                \"What is the main topic discussed in this document?\"\n            ];\n        } catch (error) {\n            return [\n                \"What is the main topic discussed in this document?\"\n            ];\n        }\n    }\n    // Simple Evolution Agent\n    async simpleEvolution(state) {\n        const evolved_questions = [\n            ...state.evolved_questions || []\n        ];\n        const errors = [\n            ...state.errors || []\n        ];\n        for (const doc of state.processed_docs){\n            for (const question of doc.initial_questions){\n                try {\n                    const evolved = await this.evolveQuestionSimple(question, doc.content);\n                    if (evolved) {\n                        evolved_questions.push({\n                            id: (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(),\n                            question: evolved,\n                            evolution_type: \"simple\",\n                            complexity_score: 5.0,\n                            source_document_ids: [\n                                doc.id\n                            ],\n                            metadata: {\n                                original_question: question,\n                                evolution_timestamp: new Date().toISOString()\n                            }\n                        });\n                    }\n                } catch (error) {\n                    errors.push(`Simple evolution error: ${error}`);\n                }\n            }\n        }\n        return {\n            evolved_questions,\n            errors\n        };\n    }\n    async evolveQuestionSimple(question, context) {\n        const prompt = _langchain_core_prompts__WEBPACK_IMPORTED_MODULE_0__.ChatPromptTemplate.fromTemplate(`\n      Evolve the following question to make it more complex and educational.\n      Add constraints, deepen the inquiry, or increase specificity.\n      \n      Original Question: {question}\n      Context: {context}\n      \n      Return only the evolved question:\n    `);\n        try {\n            const chain = prompt.pipe(this.llm);\n            const response = await chain.invoke({\n                question,\n                context: context.slice(0, 1000)\n            });\n            return response.content.toString().trim();\n        } catch (error) {\n            return null;\n        }\n    }\n    // Multi-Context Evolution Agent\n    async multiContextEvolution(state) {\n        const evolved_questions = [\n            ...state.evolved_questions || []\n        ];\n        const errors = [\n            ...state.errors || []\n        ];\n        if (state.processed_docs.length < 2) {\n            errors.push(\"Need at least 2 documents for multi-context evolution\");\n            return {\n                evolved_questions,\n                errors\n            };\n        }\n        // Create questions spanning multiple documents\n        for(let i = 0; i < state.processed_docs.length; i++){\n            for(let j = i + 1; j < Math.min(i + 2, state.processed_docs.length); j++){\n                const doc1 = state.processed_docs[i];\n                const doc2 = state.processed_docs[j];\n                if (doc1.initial_questions.length > 0) {\n                    try {\n                        const evolved = await this.evolveQuestionMultiContext(doc1.initial_questions[0], doc1.content, doc2.content);\n                        if (evolved) {\n                            evolved_questions.push({\n                                id: (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(),\n                                question: evolved,\n                                evolution_type: \"multi_context\",\n                                complexity_score: 7.0,\n                                source_document_ids: [\n                                    doc1.id,\n                                    doc2.id\n                                ],\n                                metadata: {\n                                    original_question: doc1.initial_questions[0],\n                                    requires_multiple_contexts: true,\n                                    evolution_timestamp: new Date().toISOString()\n                                }\n                            });\n                        }\n                    } catch (error) {\n                        errors.push(`Multi-context evolution error: ${error}`);\n                    }\n                }\n            }\n        }\n        return {\n            evolved_questions,\n            errors\n        };\n    }\n    async evolveQuestionMultiContext(question, context1, context2) {\n        const prompt = _langchain_core_prompts__WEBPACK_IMPORTED_MODULE_0__.ChatPromptTemplate.fromTemplate(`\n      Evolve the following question to require synthesis from both contexts.\n      The evolved question should be answerable only by combining information from both sources.\n      \n      Original Question: {question}\n      Context 1: {context1}\n      Context 2: {context2}\n      \n      Return only the evolved question:\n    `);\n        try {\n            const chain = prompt.pipe(this.llm);\n            const response = await chain.invoke({\n                question,\n                context1: context1.slice(0, 800),\n                context2: context2.slice(0, 800)\n            });\n            return response.content.toString().trim();\n        } catch (error) {\n            return null;\n        }\n    }\n    // Reasoning Evolution Agent\n    async reasoningEvolution(state) {\n        const evolved_questions = [\n            ...state.evolved_questions || []\n        ];\n        const errors = [\n            ...state.errors || []\n        ];\n        // Take some existing questions and evolve them for reasoning\n        const existingQuestions = evolved_questions.slice(0, 2);\n        for (const eq of existingQuestions){\n            // Find source context\n            let sourceContext = \"\";\n            for (const doc of state.processed_docs){\n                if (eq.source_document_ids.includes(doc.id)) {\n                    sourceContext = doc.content;\n                    break;\n                }\n            }\n            if (sourceContext) {\n                try {\n                    const evolved = await this.evolveQuestionReasoning(eq.question, sourceContext);\n                    if (evolved) {\n                        evolved_questions.push({\n                            id: (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(),\n                            question: evolved,\n                            evolution_type: \"reasoning\",\n                            complexity_score: 8.0,\n                            source_document_ids: eq.source_document_ids,\n                            metadata: {\n                                original_question: eq.question,\n                                requires_reasoning: true,\n                                evolution_timestamp: new Date().toISOString()\n                            }\n                        });\n                    }\n                } catch (error) {\n                    errors.push(`Reasoning evolution error: ${error}`);\n                }\n            }\n        }\n        return {\n            evolved_questions,\n            errors\n        };\n    }\n    async evolveQuestionReasoning(question, context) {\n        const prompt = _langchain_core_prompts__WEBPACK_IMPORTED_MODULE_0__.ChatPromptTemplate.fromTemplate(`\n      Evolve the following question to require complex reasoning and analysis.\n      The question should test deep understanding, causal reasoning, or critical evaluation.\n      \n      Original Question: {question}\n      Context: {context}\n      \n      Return only the evolved question:\n    `);\n        try {\n            const chain = prompt.pipe(this.llm);\n            const response = await chain.invoke({\n                question,\n                context: context.slice(0, 1000)\n            });\n            return response.content.toString().trim();\n        } catch (error) {\n            return null;\n        }\n    }\n    // Answer Generation Agent\n    async generateAnswers(state) {\n        const question_answers = [];\n        for (const eq of state.evolved_questions){\n            // Find relevant contexts\n            const contexts = [];\n            for (const doc of state.processed_docs){\n                if (eq.source_document_ids.includes(doc.id)) {\n                    contexts.push(doc.content);\n                }\n            }\n            if (contexts.length > 0) {\n                try {\n                    const answer = await this.generateAnswer(eq.question, contexts);\n                    if (answer) {\n                        question_answers.push({\n                            question_id: eq.id,\n                            answer,\n                            confidence_score: 0.85,\n                            source_documents: eq.source_document_ids\n                        });\n                    }\n                } catch (error) {\n                    state.errors.push(`Answer generation error: ${error}`);\n                }\n            }\n        }\n        return {\n            question_answers\n        };\n    }\n    async generateAnswer(question, contexts) {\n        const combinedContext = contexts.join(\"\\n\\n\").slice(0, 2000);\n        const prompt = _langchain_core_prompts__WEBPACK_IMPORTED_MODULE_0__.ChatPromptTemplate.fromTemplate(`\n      Answer the following question based on the provided contexts.\n      Provide a comprehensive answer using only the information in the contexts.\n      \n      Question: {question}\n      Contexts: {contexts}\n      \n      Answer:\n    `);\n        try {\n            const chain = prompt.pipe(this.llm);\n            const response = await chain.invoke({\n                question,\n                contexts: combinedContext\n            });\n            return response.content.toString().trim();\n        } catch (error) {\n            return null;\n        }\n    }\n    // Context Retrieval Agent\n    async retrieveContexts(state) {\n        const question_contexts = [];\n        for (const eq of state.evolved_questions){\n            const contexts = [];\n            const relevance_scores = [];\n            const context_sources = [];\n            // Get contexts from source documents\n            for (const doc of state.processed_docs){\n                if (eq.source_document_ids.includes(doc.id)) {\n                    const passages = this.extractRelevantPassages(eq.question, doc.content);\n                    for (const passage of passages){\n                        contexts.push(passage);\n                        relevance_scores.push(0.8); // Simplified scoring\n                        context_sources.push(doc.id);\n                    }\n                }\n            }\n            if (contexts.length > 0) {\n                question_contexts.push({\n                    question_id: eq.id,\n                    contexts: contexts.slice(0, 3),\n                    relevance_scores: relevance_scores.slice(0, 3),\n                    context_sources: context_sources.slice(0, 3)\n                });\n            }\n        }\n        return {\n            question_contexts\n        };\n    }\n    extractRelevantPassages(question, content) {\n        // Extract meaningful passages from the content\n        const passages = [];\n        // Split content into paragraphs (by double newlines or single newlines)\n        const paragraphs = content.split(/\\n\\n+/).filter((p)=>p.trim().length > 50);\n        if (paragraphs.length === 0) {\n            // If no paragraphs, split by single newlines\n            const lines = content.split(\"\\n\").filter((l)=>l.trim().length > 20);\n            // Group lines into chunks of ~500 characters\n            let currentPassage = \"\";\n            for (const line of lines){\n                if (currentPassage.length + line.length > 500 && currentPassage.length > 100) {\n                    passages.push(currentPassage.trim());\n                    currentPassage = line;\n                } else {\n                    currentPassage += (currentPassage ? \"\\n\" : \"\") + line;\n                }\n            }\n            if (currentPassage.trim().length > 50) {\n                passages.push(currentPassage.trim());\n            }\n        } else {\n            // Use paragraphs as passages, but ensure they're not too short\n            for (const para of paragraphs){\n                if (para.trim().length > 50) {\n                    // Limit passage length to ~1000 characters for better context\n                    if (para.length > 1000) {\n                        passages.push(para.substring(0, 1000) + \"...\");\n                    } else {\n                        passages.push(para.trim());\n                    }\n                }\n            }\n        }\n        // If we still don't have good passages, create chunks from the content\n        if (passages.length === 0 && content.length > 100) {\n            const chunkSize = 500;\n            for(let i = 0; i < content.length; i += chunkSize){\n                const chunk = content.substring(i, Math.min(i + chunkSize, content.length));\n                if (chunk.trim().length > 50) {\n                    passages.push(chunk.trim());\n                }\n            }\n        }\n        // Return up to 3 most relevant passages (in a real implementation, you'd use embeddings)\n        return passages.slice(0, 3);\n    }\n    // Main execution method\n    async run(documents) {\n        const initialState = {\n            documents,\n            processed_docs: [],\n            evolved_questions: [],\n            question_answers: [],\n            question_contexts: [],\n            errors: []\n        };\n        try {\n            const result = await this.graph.invoke(initialState);\n            return {\n                evolved_questions: result.evolved_questions,\n                question_answers: result.question_answers,\n                question_contexts: result.question_contexts,\n                generation_metadata: {\n                    total_questions: result.evolved_questions.length,\n                    evolution_types_count: {\n                        simple: result.evolved_questions.filter((q)=>q.evolution_type === \"simple\").length,\n                        multi_context: result.evolved_questions.filter((q)=>q.evolution_type === \"multi_context\").length,\n                        reasoning: result.evolved_questions.filter((q)=>q.evolution_type === \"reasoning\").length\n                    },\n                    processing_errors: result.errors,\n                    generation_timestamp: new Date().toISOString()\n                }\n            };\n        } catch (error) {\n            throw new Error(`Generation failed: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n        }\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3JhZ2FzL2xhbmdncmFwaC1pbXBsZW1lbnRhdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFFNkQ7QUFDekI7QUFVcEMsb0VBQW9FO0FBQ3BFLE1BQU1HO0lBS0pDLFFBQVFDLElBQVksRUFBRUMsSUFBdUMsRUFBRTtRQUM3RCxJQUFJLENBQUNDLEtBQUssQ0FBQ0MsR0FBRyxDQUFDSCxNQUFNQztJQUN2QjtJQUVBRyxRQUFRQyxJQUFZLEVBQUVDLEVBQVUsRUFBRTtRQUNoQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0osR0FBRyxDQUFDRSxNQUFNQztJQUN2QjtJQUVBRSxTQUFTQyxJQUFZLEVBQUU7UUFDckIsSUFBSSxDQUFDQyxTQUFTLEdBQUdEO0lBQ25CO0lBRUEsTUFBTUUsT0FBT0MsWUFBZSxFQUFjO1FBQ3hDLElBQUlDLGVBQWU7WUFBRSxHQUFHRCxZQUFZO1FBQUM7UUFDckMsSUFBSUUsY0FBYyxJQUFJLENBQUNKLFNBQVM7UUFFaEMsTUFBT0ksZUFBZUEsZ0JBQWdCLE1BQU87WUFDM0MsTUFBTUMsV0FBVyxJQUFJLENBQUNiLEtBQUssQ0FBQ2MsR0FBRyxDQUFDRjtZQUNoQyxJQUFJLENBQUNDLFVBQVU7Z0JBQ2IsTUFBTSxJQUFJRSxNQUFNLENBQUMsS0FBSyxFQUFFSCxZQUFZLFVBQVUsQ0FBQztZQUNqRDtZQUVBLE1BQU1JLGVBQWUsTUFBTUgsU0FBU0Y7WUFDcENBLGVBQWU7Z0JBQUUsR0FBR0EsWUFBWTtnQkFBRSxHQUFHSyxZQUFZO1lBQUM7WUFFbERKLGNBQWMsSUFBSSxDQUFDUCxLQUFLLENBQUNTLEdBQUcsQ0FBQ0YsZ0JBQWdCO1FBQy9DO1FBRUEsT0FBT0Q7SUFDVDs7YUFqQ1FYLFFBQXdELElBQUlpQjthQUM1RFosUUFBNkIsSUFBSVk7YUFDakNULFlBQW9COztBQWdDOUI7QUFFQSxnQ0FBZ0M7QUFDekIsTUFBTVU7SUFJWEMsWUFBWUMsR0FBZSxDQUFFO1FBQzNCLElBQUksQ0FBQ0EsR0FBRyxHQUFH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QUFNO29CQUNoQytFLHNCQUFzQixJQUFJaEQsT0FBT0MsV0FBVztnQkFDOUM7WUFDRjtRQUNGLEVBQUUsT0FBT2pDLE9BQU87WUFDZCxNQUFNLElBQUk5QixNQUFNLENBQUMsbUJBQW1CLEVBQUU4QixpQkFBaUI5QixRQUFROEIsTUFBTWlGLE9BQU8sR0FBRyxnQkFBZ0IsQ0FBQztRQUNsRztJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYWdhcy1sYW5nZ3JhcGgtdmVyY2VsLy4vc3JjL2xpYi9yYWdhcy9sYW5nZ3JhcGgtaW1wbGVtZW50YXRpb24udHM/NTdmNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGF0T3BlbkFJIH0gZnJvbSAnQGxhbmdjaGFpbi9vcGVuYWknO1xuaW1wb3J0IHsgRG9jdW1lbnQgfSBmcm9tICdAbGFuZ2NoYWluL2NvcmUvZG9jdW1lbnRzJztcbmltcG9ydCB7IENoYXRQcm9tcHRUZW1wbGF0ZSB9IGZyb20gJ0BsYW5nY2hhaW4vY29yZS9wcm9tcHRzJztcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IHsgXG4gIFJBR0FTU3RhdGUsIFxuICBQcm9jZXNzZWREb2N1bWVudCwgXG4gIEV2b2x2ZWRRdWVzdGlvbiwgXG4gIFF1ZXN0aW9uQW5zd2VyLCBcbiAgUXVlc3Rpb25Db250ZXh0LFxuICBHZW5lcmF0aW9uUmVzdWx0IFxufSBmcm9tICdAL3R5cGVzJztcblxuLy8gU2ltcGxlIGdyYXBoIGltcGxlbWVudGF0aW9uIHdpdGhvdXQgZXh0ZXJuYWwgbGFuZ2dyYXBoIGRlcGVuZGVuY3lcbmNsYXNzIFNpbXBsZUdyYXBoPFQ+IHtcbiAgcHJpdmF0ZSBub2RlczogTWFwPHN0cmluZywgKHN0YXRlOiBUKSA9PiBQcm9taXNlPFBhcnRpYWw8VD4+PiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBlZGdlczogTWFwPHN0cmluZywgc3RyaW5nPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBzdGFydE5vZGU6IHN0cmluZyA9ICcnO1xuXG4gIGFkZE5vZGUobmFtZTogc3RyaW5nLCBmdW5jOiAoc3RhdGU6IFQpID0+IFByb21pc2U8UGFydGlhbDxUPj4pIHtcbiAgICB0aGlzLm5vZGVzLnNldChuYW1lLCBmdW5jKTtcbiAgfVxuXG4gIGFkZEVkZ2UoZnJvbTogc3RyaW5nLCB0bzogc3RyaW5nKSB7XG4gICAgdGhpcy5lZGdlcy5zZXQoZnJvbSwgdG8pO1xuICB9XG5cbiAgc2V0U3RhcnQobm9kZTogc3RyaW5nKSB7XG4gICAgdGhpcy5zdGFydE5vZGUgPSBub2RlO1xuICB9XG5cbiAgYXN5bmMgaW52b2tlKGluaXRpYWxTdGF0ZTogVCk6IFByb21pc2U8VD4ge1xuICAgIGxldCBjdXJyZW50U3RhdGUgPSB7IC4uLmluaXRpYWxTdGF0ZSB9O1xuICAgIGxldCBjdXJyZW50Tm9kZSA9IHRoaXMuc3RhcnROb2RlO1xuXG4gICAgd2hpbGUgKGN1cnJlbnROb2RlICYmIGN1cnJlbnROb2RlICE9PSAnRU5EJykge1xuICAgICAgY29uc3Qgbm9kZUZ1bmMgPSB0aGlzLm5vZGVzLmdldChjdXJyZW50Tm9kZSk7XG4gICAgICBpZiAoIW5vZGVGdW5jKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTm9kZSAke2N1cnJlbnROb2RlfSBub3QgZm91bmRgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGFydGlhbFN0YXRlID0gYXdhaXQgbm9kZUZ1bmMoY3VycmVudFN0YXRlKTtcbiAgICAgIGN1cnJlbnRTdGF0ZSA9IHsgLi4uY3VycmVudFN0YXRlLCAuLi5wYXJ0aWFsU3RhdGUgfTtcblxuICAgICAgY3VycmVudE5vZGUgPSB0aGlzLmVkZ2VzLmdldChjdXJyZW50Tm9kZSkgfHwgJ0VORCc7XG4gICAgfVxuXG4gICAgcmV0dXJuIGN1cnJlbnRTdGF0ZTtcbiAgfVxufVxuXG4vLyBNYWluIExhbmdHcmFwaCBJbXBsZW1lbnRhdGlvblxuZXhwb3J0IGNsYXNzIFJBR0FTTGFuZ0dyYXBoIHtcbiAgcHJpdmF0ZSBncmFwaDogU2ltcGxlR3JhcGg8UkFHQVNTdGF0ZT47XG4gIHByaXZhdGUgbGxtOiBDaGF0T3BlbkFJO1xuICBcbiAgY29uc3RydWN0b3IobGxtOiBDaGF0T3BlbkFJKSB7XG4gICAgdGhpcy5sbG0gPSBsbG07XG4gICAgdGhpcy5ncmFwaCA9IHRoaXMuY3JlYXRlR3JhcGgoKTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBjcmVhdGVHcmFwaCgpOiBTaW1wbGVHcmFwaDxSQUdBU1N0YXRlPiB7XG4gICAgY29uc3Qgd29ya2Zsb3cgPSBuZXcgU2ltcGxlR3JhcGg8UkFHQVNTdGF0ZT4oKTtcbiAgICBcbiAgICAvLyBBZGQgbm9kZXNcbiAgICB3b3JrZmxvdy5hZGROb2RlKCdwcm9jZXNzX2RvY3VtZW50cycsIHRoaXMucHJvY2Vzc0RvY3VtZW50cy5iaW5kKHRoaXMpKTtcbiAgICB3b3JrZmxvdy5hZGROb2RlKCdzaW1wbGVfZXZvbHV0aW9uJywgdGhpcy5zaW1wbGVFdm9sdXRpb24uYmluZCh0aGlzKSk7XG4gICAgd29ya2Zsb3cuYWRkTm9kZSgnbXVsdGlfY29udGV4dF9ldm9sdXRpb24nLCB0aGlzLm11bHRpQ29udGV4dEV2b2x1dGlvbi5iaW5kKHRoaXMpKTtcbiAgICB3b3JrZmxvdy5hZGROb2RlKCdyZWFzb25pbmdfZXZvbHV0aW9uJywgdGhpcy5yZWFzb25pbmdFdm9sdXRpb24uYmluZCh0aGlzKSk7XG4gICAgd29ya2Zsb3cuYWRkTm9kZSgnZ2VuZXJhdGVfYW5zd2VycycsIHRoaXMuZ2VuZXJhdGVBbnN3ZXJzLmJpbmQodGhpcykpO1xuICAgIHdvcmtmbG93LmFkZE5vZGUoJ3JldHJpZXZlX2NvbnRleHRzJywgdGhpcy5yZXRyaWV2ZUNvbnRleHRzLmJpbmQodGhpcykpO1xuICAgIFxuICAgIC8vIERlZmluZSBlZGdlc1xuICAgIHdvcmtmbG93LnNldFN0YXJ0KCdwcm9jZXNzX2RvY3VtZW50cycpO1xuICAgIHdvcmtmbG93LmFkZEVkZ2UoJ3Byb2Nlc3NfZG9jdW1lbnRzJywgJ3NpbXBsZV9ldm9sdXRpb24nKTtcbiAgICB3b3JrZmxvdy5hZGRFZGdlKCdzaW1wbGVfZXZvbHV0aW9uJywgJ211bHRpX2NvbnRleHRfZXZvbHV0aW9uJyk7XG4gICAgd29ya2Zsb3cuYWRkRWRnZSgnbXVsdGlfY29udGV4dF9ldm9sdXRpb24nLCAncmVhc29uaW5nX2V2b2x1dGlvbicpO1xuICAgIHdvcmtmbG93LmFkZEVkZ2UoJ3JlYXNvbmluZ19ldm9sdXRpb24nLCAnZ2VuZXJhdGVfYW5zd2VycycpO1xuICAgIHdvcmtmbG93LmFkZEVkZ2UoJ2dlbmVyYXRlX2Fuc3dlcnMnLCAncmV0cmlldmVfY29udGV4dHMnKTtcbiAgICB3b3JrZmxvdy5hZGRFZGdlKCdyZXRyaWV2ZV9jb250ZXh0cycsICdFTkQnKTtcbiAgICBcbiAgICByZXR1cm4gd29ya2Zsb3c7XG4gIH1cbiAgXG4gIC8vIERvY3VtZW50IFByb2Nlc3NpbmcgQWdlbnRcbiAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzRG9jdW1lbnRzKHN0YXRlOiBSQUdBU1N0YXRlKTogUHJvbWlzZTxQYXJ0aWFsPFJBR0FTU3RhdGU+PiB7XG4gICAgY29uc3QgcHJvY2Vzc2VkX2RvY3M6IFByb2Nlc3NlZERvY3VtZW50W10gPSBbXTtcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXRlLmRvY3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZG9jID0gc3RhdGUuZG9jdW1lbnRzW2ldO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcXVlc3Rpb25zID0gYXdhaXQgdGhpcy5leHRyYWN0SW5pdGlhbFF1ZXN0aW9ucyhkb2MucGFnZUNvbnRlbnQpO1xuICAgICAgICBcbiAgICAgICAgcHJvY2Vzc2VkX2RvY3MucHVzaCh7XG4gICAgICAgICAgaWQ6IGBkb2NfJHtpfWAsXG4gICAgICAgICAgY29udGVudDogZG9jLnBhZ2VDb250ZW50LFxuICAgICAgICAgIG1ldGFkYXRhOiBkb2MubWV0YWRhdGEsXG4gICAgICAgICAgaW5pdGlhbF9xdWVzdGlvbnM6IHF1ZXN0aW9uc1xuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHN0YXRlLmVycm9ycy5wdXNoKGBEb2N1bWVudCBwcm9jZXNzaW5nIGVycm9yOiAke2Vycm9yfWApO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4geyBwcm9jZXNzZWRfZG9jcyB9O1xuICB9XG4gIFxuICBwcml2YXRlIGFzeW5jIGV4dHJhY3RJbml0aWFsUXVlc3Rpb25zKGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICBjb25zdCBwcm9tcHQgPSBDaGF0UHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKGBcbiAgICAgIEJhc2VkIG9uIHRoZSBmb2xsb3dpbmcgY29udGVudCwgZ2VuZXJhdGUgMyBiYXNpYyBjb21wcmVoZW5zaW9uIHF1ZXN0aW9ucy5cbiAgICAgIFJldHVybiBvbmx5IHRoZSBxdWVzdGlvbnMsIG9uZSBwZXIgbGluZSwgd2l0aG91dCBudW1iZXJpbmcuXG4gICAgICBcbiAgICAgIENvbnRlbnQ6IHtjb250ZW50fVxuICAgIGApO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjaGFpbiA9IHByb21wdC5waXBlKHRoaXMubGxtKTtcbiAgICAgIC8vIFVzZSBtb3JlIGNvbnRlbnQgYnV0IHNraXAgaGVhZGVyIGxpbmVzIGlmIHByZXNlbnRcbiAgICAgIGNvbnN0IGNvbnRlbnRMaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgICAgbGV0IG1haW5Db250ZW50ID0gY29udGVudDtcbiAgICAgIFxuICAgICAgLy8gU2tpcCBtZXRhZGF0YS9oZWFkZXIgbGluZXMgYXQgdGhlIGJlZ2lubmluZ1xuICAgICAgbGV0IHN0YXJ0SW5kZXggPSAwO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLm1pbigxMCwgY29udGVudExpbmVzLmxlbmd0aCk7IGkrKykge1xuICAgICAgICBjb25zdCBsaW5lID0gY29udGVudExpbmVzW2ldLnRyaW0oKTtcbiAgICAgICAgaWYgKGxpbmUubWF0Y2goL14oRGF0ZXxWZXJzaW9ufEF1dGhvcnxMaWNlbnNlfFRhYmxlIG9mIENvbnRlbnRzKTovaSkgfHwgXG4gICAgICAgICAgICBsaW5lLm1hdGNoKC9eIytcXHMqJC8pIHx8IFxuICAgICAgICAgICAgbGluZS5sZW5ndGggPCAxMCkge1xuICAgICAgICAgIHN0YXJ0SW5kZXggPSBpICsgMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoc3RhcnRJbmRleCA+IDApIHtcbiAgICAgICAgbWFpbkNvbnRlbnQgPSBjb250ZW50TGluZXMuc2xpY2Uoc3RhcnRJbmRleCkuam9pbignXFxuJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2hhaW4uaW52b2tlKHsgY29udGVudDogbWFpbkNvbnRlbnQuc2xpY2UoMCwgNDAwMCkgfSk7XG4gICAgICBjb25zdCBxdWVzdGlvbnMgPSByZXNwb25zZS5jb250ZW50XG4gICAgICAgIC50b1N0cmluZygpXG4gICAgICAgIC5zcGxpdCgnXFxuJylcbiAgICAgICAgLm1hcChxID0+IHEudHJpbSgpKVxuICAgICAgICAuZmlsdGVyKHEgPT4gcSAmJiBxLmVuZHNXaXRoKCc/JykpXG4gICAgICAgIC5zbGljZSgwLCAzKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHF1ZXN0aW9ucy5sZW5ndGggPiAwID8gcXVlc3Rpb25zIDogWydXaGF0IGlzIHRoZSBtYWluIHRvcGljIGRpc2N1c3NlZCBpbiB0aGlzIGRvY3VtZW50PyddO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gWydXaGF0IGlzIHRoZSBtYWluIHRvcGljIGRpc2N1c3NlZCBpbiB0aGlzIGRvY3VtZW50PyddO1xuICAgIH1cbiAgfVxuICBcbiAgLy8gU2ltcGxlIEV2b2x1dGlvbiBBZ2VudFxuICBwcml2YXRlIGFzeW5jIHNpbXBsZUV2b2x1dGlvbihzdGF0ZTogUkFHQVNTdGF0ZSk6IFByb21pc2U8UGFydGlhbDxSQUdBU1N0YXRlPj4ge1xuICAgIGNvbnN0IGV2b2x2ZWRfcXVlc3Rpb25zOiBFdm9sdmVkUXVlc3Rpb25bXSA9IFsuLi4oc3RhdGUuZXZvbHZlZF9xdWVzdGlvbnMgfHwgW10pXTtcbiAgICBjb25zdCBlcnJvcnMgPSBbLi4uKHN0YXRlLmVycm9ycyB8fCBbXSldO1xuICAgIFxuICAgIGZvciAoY29uc3QgZG9jIG9mIHN0YXRlLnByb2Nlc3NlZF9kb2NzKSB7XG4gICAgICBmb3IgKGNvbnN0IHF1ZXN0aW9uIG9mIGRvYy5pbml0aWFsX3F1ZXN0aW9ucykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGV2b2x2ZWQgPSBhd2FpdCB0aGlzLmV2b2x2ZVF1ZXN0aW9uU2ltcGxlKHF1ZXN0aW9uLCBkb2MuY29udGVudCk7XG4gICAgICAgICAgaWYgKGV2b2x2ZWQpIHtcbiAgICAgICAgICAgIGV2b2x2ZWRfcXVlc3Rpb25zLnB1c2goe1xuICAgICAgICAgICAgICBpZDogdXVpZHY0KCksXG4gICAgICAgICAgICAgIHF1ZXN0aW9uOiBldm9sdmVkLFxuICAgICAgICAgICAgICBldm9sdXRpb25fdHlwZTogJ3NpbXBsZScsXG4gICAgICAgICAgICAgIGNvbXBsZXhpdHlfc2NvcmU6IDUuMCxcbiAgICAgICAgICAgICAgc291cmNlX2RvY3VtZW50X2lkczogW2RvYy5pZF0sXG4gICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgb3JpZ2luYWxfcXVlc3Rpb246IHF1ZXN0aW9uLFxuICAgICAgICAgICAgICAgIGV2b2x1dGlvbl90aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgZXJyb3JzLnB1c2goYFNpbXBsZSBldm9sdXRpb24gZXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHsgZXZvbHZlZF9xdWVzdGlvbnMsIGVycm9ycyB9O1xuICB9XG4gIFxuICBwcml2YXRlIGFzeW5jIGV2b2x2ZVF1ZXN0aW9uU2ltcGxlKHF1ZXN0aW9uOiBzdHJpbmcsIGNvbnRleHQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgIGNvbnN0IHByb21wdCA9IENoYXRQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoYFxuICAgICAgRXZvbHZlIHRoZSBmb2xsb3dpbmcgcXVlc3Rpb24gdG8gbWFrZSBpdCBtb3JlIGNvbXBsZXggYW5kIGVkdWNhdGlvbmFsLlxuICAgICAgQWRkIGNvbnN0cmFpbnRzLCBkZWVwZW4gdGhlIGlucXVpcnksIG9yIGluY3JlYXNlIHNwZWNpZmljaXR5LlxuICAgICAgXG4gICAgICBPcmlnaW5hbCBRdWVzdGlvbjoge3F1ZXN0aW9ufVxuICAgICAgQ29udGV4dDoge2NvbnRleHR9XG4gICAgICBcbiAgICAgIFJldHVybiBvbmx5IHRoZSBldm9sdmVkIHF1ZXN0aW9uOlxuICAgIGApO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjaGFpbiA9IHByb21wdC5waXBlKHRoaXMubGxtKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2hhaW4uaW52b2tlKHtcbiAgICAgICAgcXVlc3Rpb24sXG4gICAgICAgIGNvbnRleHQ6IGNvbnRleHQuc2xpY2UoMCwgMTAwMClcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmNvbnRlbnQudG9TdHJpbmcoKS50cmltKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuICBcbiAgLy8gTXVsdGktQ29udGV4dCBFdm9sdXRpb24gQWdlbnRcbiAgcHJpdmF0ZSBhc3luYyBtdWx0aUNvbnRleHRFdm9sdXRpb24oc3RhdGU6IFJBR0FTU3RhdGUpOiBQcm9taXNlPFBhcnRpYWw8UkFHQVNTdGF0ZT4+IHtcbiAgICBjb25zdCBldm9sdmVkX3F1ZXN0aW9uczogRXZvbHZlZFF1ZXN0aW9uW10gPSBbLi4uKHN0YXRlLmV2b2x2ZWRfcXVlc3Rpb25zIHx8IFtdKV07XG4gICAgY29uc3QgZXJyb3JzID0gWy4uLihzdGF0ZS5lcnJvcnMgfHwgW10pXTtcbiAgICBcbiAgICBpZiAoc3RhdGUucHJvY2Vzc2VkX2RvY3MubGVuZ3RoIDwgMikge1xuICAgICAgZXJyb3JzLnB1c2goJ05lZWQgYXQgbGVhc3QgMiBkb2N1bWVudHMgZm9yIG11bHRpLWNvbnRleHQgZXZvbHV0aW9uJyk7XG4gICAgICByZXR1cm4geyBldm9sdmVkX3F1ZXN0aW9ucywgZXJyb3JzIH07XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWF0ZSBxdWVzdGlvbnMgc3Bhbm5pbmcgbXVsdGlwbGUgZG9jdW1lbnRzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGF0ZS5wcm9jZXNzZWRfZG9jcy5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgTWF0aC5taW4oaSArIDIsIHN0YXRlLnByb2Nlc3NlZF9kb2NzLmxlbmd0aCk7IGorKykge1xuICAgICAgICBjb25zdCBkb2MxID0gc3RhdGUucHJvY2Vzc2VkX2RvY3NbaV07XG4gICAgICAgIGNvbnN0IGRvYzIgPSBzdGF0ZS5wcm9jZXNzZWRfZG9jc1tqXTtcbiAgICAgICAgXG4gICAgICAgIGlmIChkb2MxLmluaXRpYWxfcXVlc3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZXZvbHZlZCA9IGF3YWl0IHRoaXMuZXZvbHZlUXVlc3Rpb25NdWx0aUNvbnRleHQoXG4gICAgICAgICAgICAgIGRvYzEuaW5pdGlhbF9xdWVzdGlvbnNbMF0sXG4gICAgICAgICAgICAgIGRvYzEuY29udGVudCxcbiAgICAgICAgICAgICAgZG9jMi5jb250ZW50XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZXZvbHZlZCkge1xuICAgICAgICAgICAgICBldm9sdmVkX3F1ZXN0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICBpZDogdXVpZHY0KCksXG4gICAgICAgICAgICAgICAgcXVlc3Rpb246IGV2b2x2ZWQsXG4gICAgICAgICAgICAgICAgZXZvbHV0aW9uX3R5cGU6ICdtdWx0aV9jb250ZXh0JyxcbiAgICAgICAgICAgICAgICBjb21wbGV4aXR5X3Njb3JlOiA3LjAsXG4gICAgICAgICAgICAgICAgc291cmNlX2RvY3VtZW50X2lkczogW2RvYzEuaWQsIGRvYzIuaWRdLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICBvcmlnaW5hbF9xdWVzdGlvbjogZG9jMS5pbml0aWFsX3F1ZXN0aW9uc1swXSxcbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVzX211bHRpcGxlX2NvbnRleHRzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgZXZvbHV0aW9uX3RpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goYE11bHRpLWNvbnRleHQgZXZvbHV0aW9uIGVycm9yOiAke2Vycm9yfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4geyBldm9sdmVkX3F1ZXN0aW9ucywgZXJyb3JzIH07XG4gIH1cbiAgXG4gIHByaXZhdGUgYXN5bmMgZXZvbHZlUXVlc3Rpb25NdWx0aUNvbnRleHQoXG4gICAgcXVlc3Rpb246IHN0cmluZyxcbiAgICBjb250ZXh0MTogc3RyaW5nLFxuICAgIGNvbnRleHQyOiBzdHJpbmdcbiAgKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgY29uc3QgcHJvbXB0ID0gQ2hhdFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShgXG4gICAgICBFdm9sdmUgdGhlIGZvbGxvd2luZyBxdWVzdGlvbiB0byByZXF1aXJlIHN5bnRoZXNpcyBmcm9tIGJvdGggY29udGV4dHMuXG4gICAgICBUaGUgZXZvbHZlZCBxdWVzdGlvbiBzaG91bGQgYmUgYW5zd2VyYWJsZSBvbmx5IGJ5IGNvbWJpbmluZyBpbmZvcm1hdGlvbiBmcm9tIGJvdGggc291cmNlcy5cbiAgICAgIFxuICAgICAgT3JpZ2luYWwgUXVlc3Rpb246IHtxdWVzdGlvbn1cbiAgICAgIENvbnRleHQgMToge2NvbnRleHQxfVxuICAgICAgQ29udGV4dCAyOiB7Y29udGV4dDJ9XG4gICAgICBcbiAgICAgIFJldHVybiBvbmx5IHRoZSBldm9sdmVkIHF1ZXN0aW9uOlxuICAgIGApO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjaGFpbiA9IHByb21wdC5waXBlKHRoaXMubGxtKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2hhaW4uaW52b2tlKHtcbiAgICAgICAgcXVlc3Rpb24sXG4gICAgICAgIGNvbnRleHQxOiBjb250ZXh0MS5zbGljZSgwLCA4MDApLFxuICAgICAgICBjb250ZXh0MjogY29udGV4dDIuc2xpY2UoMCwgODAwKVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuY29udGVudC50b1N0cmluZygpLnRyaW0oKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG4gIFxuICAvLyBSZWFzb25pbmcgRXZvbHV0aW9uIEFnZW50XG4gIHByaXZhdGUgYXN5bmMgcmVhc29uaW5nRXZvbHV0aW9uKHN0YXRlOiBSQUdBU1N0YXRlKTogUHJvbWlzZTxQYXJ0aWFsPFJBR0FTU3RhdGU+PiB7XG4gICAgY29uc3QgZXZvbHZlZF9xdWVzdGlvbnM6IEV2b2x2ZWRRdWVzdGlvbltdID0gWy4uLihzdGF0ZS5ldm9sdmVkX3F1ZXN0aW9ucyB8fCBbXSldO1xuICAgIGNvbnN0IGVycm9ycyA9IFsuLi4oc3RhdGUuZXJyb3JzIHx8IFtdKV07XG4gICAgXG4gICAgLy8gVGFrZSBzb21lIGV4aXN0aW5nIHF1ZXN0aW9ucyBhbmQgZXZvbHZlIHRoZW0gZm9yIHJlYXNvbmluZ1xuICAgIGNvbnN0IGV4aXN0aW5nUXVlc3Rpb25zID0gZXZvbHZlZF9xdWVzdGlvbnMuc2xpY2UoMCwgMik7XG4gICAgXG4gICAgZm9yIChjb25zdCBlcSBvZiBleGlzdGluZ1F1ZXN0aW9ucykge1xuICAgICAgLy8gRmluZCBzb3VyY2UgY29udGV4dFxuICAgICAgbGV0IHNvdXJjZUNvbnRleHQgPSAnJztcbiAgICAgIGZvciAoY29uc3QgZG9jIG9mIHN0YXRlLnByb2Nlc3NlZF9kb2NzKSB7XG4gICAgICAgIGlmIChlcS5zb3VyY2VfZG9jdW1lbnRfaWRzLmluY2x1ZGVzKGRvYy5pZCkpIHtcbiAgICAgICAgICBzb3VyY2VDb250ZXh0ID0gZG9jLmNvbnRlbnQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHNvdXJjZUNvbnRleHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBldm9sdmVkID0gYXdhaXQgdGhpcy5ldm9sdmVRdWVzdGlvblJlYXNvbmluZyhlcS5xdWVzdGlvbiwgc291cmNlQ29udGV4dCk7XG4gICAgICAgICAgaWYgKGV2b2x2ZWQpIHtcbiAgICAgICAgICAgIGV2b2x2ZWRfcXVlc3Rpb25zLnB1c2goe1xuICAgICAgICAgICAgICBpZDogdXVpZHY0KCksXG4gICAgICAgICAgICAgIHF1ZXN0aW9uOiBldm9sdmVkLFxuICAgICAgICAgICAgICBldm9sdXRpb25fdHlwZTogJ3JlYXNvbmluZycsXG4gICAgICAgICAgICAgIGNvbXBsZXhpdHlfc2NvcmU6IDguMCxcbiAgICAgICAgICAgICAgc291cmNlX2RvY3VtZW50X2lkczogZXEuc291cmNlX2RvY3VtZW50X2lkcyxcbiAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICBvcmlnaW5hbF9xdWVzdGlvbjogZXEucXVlc3Rpb24sXG4gICAgICAgICAgICAgICAgcmVxdWlyZXNfcmVhc29uaW5nOiB0cnVlLFxuICAgICAgICAgICAgICAgIGV2b2x1dGlvbl90aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgZXJyb3JzLnB1c2goYFJlYXNvbmluZyBldm9sdXRpb24gZXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHsgZXZvbHZlZF9xdWVzdGlvbnMsIGVycm9ycyB9O1xuICB9XG4gIFxuICBwcml2YXRlIGFzeW5jIGV2b2x2ZVF1ZXN0aW9uUmVhc29uaW5nKHF1ZXN0aW9uOiBzdHJpbmcsIGNvbnRleHQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgIGNvbnN0IHByb21wdCA9IENoYXRQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoYFxuICAgICAgRXZvbHZlIHRoZSBmb2xsb3dpbmcgcXVlc3Rpb24gdG8gcmVxdWlyZSBjb21wbGV4IHJlYXNvbmluZyBhbmQgYW5hbHlzaXMuXG4gICAgICBUaGUgcXVlc3Rpb24gc2hvdWxkIHRlc3QgZGVlcCB1bmRlcnN0YW5kaW5nLCBjYXVzYWwgcmVhc29uaW5nLCBvciBjcml0aWNhbCBldmFsdWF0aW9uLlxuICAgICAgXG4gICAgICBPcmlnaW5hbCBRdWVzdGlvbjoge3F1ZXN0aW9ufVxuICAgICAgQ29udGV4dDoge2NvbnRleHR9XG4gICAgICBcbiAgICAgIFJldHVybiBvbmx5IHRoZSBldm9sdmVkIHF1ZXN0aW9uOlxuICAgIGApO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjaGFpbiA9IHByb21wdC5waXBlKHRoaXMubGxtKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2hhaW4uaW52b2tlKHtcbiAgICAgICAgcXVlc3Rpb24sXG4gICAgICAgIGNvbnRleHQ6IGNvbnRleHQuc2xpY2UoMCwgMTAwMClcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmNvbnRlbnQudG9TdHJpbmcoKS50cmltKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuICBcbiAgLy8gQW5zd2VyIEdlbmVyYXRpb24gQWdlbnRcbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZUFuc3dlcnMoc3RhdGU6IFJBR0FTU3RhdGUpOiBQcm9taXNlPFBhcnRpYWw8UkFHQVNTdGF0ZT4+IHtcbiAgICBjb25zdCBxdWVzdGlvbl9hbnN3ZXJzOiBRdWVzdGlvbkFuc3dlcltdID0gW107XG4gICAgXG4gICAgZm9yIChjb25zdCBlcSBvZiBzdGF0ZS5ldm9sdmVkX3F1ZXN0aW9ucykge1xuICAgICAgLy8gRmluZCByZWxldmFudCBjb250ZXh0c1xuICAgICAgY29uc3QgY29udGV4dHM6IHN0cmluZ1tdID0gW107XG4gICAgICBmb3IgKGNvbnN0IGRvYyBvZiBzdGF0ZS5wcm9jZXNzZWRfZG9jcykge1xuICAgICAgICBpZiAoZXEuc291cmNlX2RvY3VtZW50X2lkcy5pbmNsdWRlcyhkb2MuaWQpKSB7XG4gICAgICAgICAgY29udGV4dHMucHVzaChkb2MuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGNvbnRleHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBhbnN3ZXIgPSBhd2FpdCB0aGlzLmdlbmVyYXRlQW5zd2VyKGVxLnF1ZXN0aW9uLCBjb250ZXh0cyk7XG4gICAgICAgICAgaWYgKGFuc3dlcikge1xuICAgICAgICAgICAgcXVlc3Rpb25fYW5zd2Vycy5wdXNoKHtcbiAgICAgICAgICAgICAgcXVlc3Rpb25faWQ6IGVxLmlkLFxuICAgICAgICAgICAgICBhbnN3ZXIsXG4gICAgICAgICAgICAgIGNvbmZpZGVuY2Vfc2NvcmU6IDAuODUsXG4gICAgICAgICAgICAgIHNvdXJjZV9kb2N1bWVudHM6IGVxLnNvdXJjZV9kb2N1bWVudF9pZHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBzdGF0ZS5lcnJvcnMucHVzaChgQW5zd2VyIGdlbmVyYXRpb24gZXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHsgcXVlc3Rpb25fYW5zd2VycyB9O1xuICB9XG4gIFxuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlQW5zd2VyKHF1ZXN0aW9uOiBzdHJpbmcsIGNvbnRleHRzOiBzdHJpbmdbXSk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgIGNvbnN0IGNvbWJpbmVkQ29udGV4dCA9IGNvbnRleHRzLmpvaW4oJ1xcblxcbicpLnNsaWNlKDAsIDIwMDApO1xuICAgIFxuICAgIGNvbnN0IHByb21wdCA9IENoYXRQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoYFxuICAgICAgQW5zd2VyIHRoZSBmb2xsb3dpbmcgcXVlc3Rpb24gYmFzZWQgb24gdGhlIHByb3ZpZGVkIGNvbnRleHRzLlxuICAgICAgUHJvdmlkZSBhIGNvbXByZWhlbnNpdmUgYW5zd2VyIHVzaW5nIG9ubHkgdGhlIGluZm9ybWF0aW9uIGluIHRoZSBjb250ZXh0cy5cbiAgICAgIFxuICAgICAgUXVlc3Rpb246IHtxdWVzdGlvbn1cbiAgICAgIENvbnRleHRzOiB7Y29udGV4dHN9XG4gICAgICBcbiAgICAgIEFuc3dlcjpcbiAgICBgKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgY2hhaW4gPSBwcm9tcHQucGlwZSh0aGlzLmxsbSk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNoYWluLmludm9rZSh7XG4gICAgICAgIHF1ZXN0aW9uLFxuICAgICAgICBjb250ZXh0czogY29tYmluZWRDb250ZXh0XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXNwb25zZS5jb250ZW50LnRvU3RyaW5nKCkudHJpbSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIENvbnRleHQgUmV0cmlldmFsIEFnZW50XG4gIHByaXZhdGUgYXN5bmMgcmV0cmlldmVDb250ZXh0cyhzdGF0ZTogUkFHQVNTdGF0ZSk6IFByb21pc2U8UGFydGlhbDxSQUdBU1N0YXRlPj4ge1xuICAgIGNvbnN0IHF1ZXN0aW9uX2NvbnRleHRzOiBRdWVzdGlvbkNvbnRleHRbXSA9IFtdO1xuICAgIFxuICAgIGZvciAoY29uc3QgZXEgb2Ygc3RhdGUuZXZvbHZlZF9xdWVzdGlvbnMpIHtcbiAgICAgIGNvbnN0IGNvbnRleHRzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgY29uc3QgcmVsZXZhbmNlX3Njb3JlczogbnVtYmVyW10gPSBbXTtcbiAgICAgIGNvbnN0IGNvbnRleHRfc291cmNlczogc3RyaW5nW10gPSBbXTtcbiAgICAgIFxuICAgICAgLy8gR2V0IGNvbnRleHRzIGZyb20gc291cmNlIGRvY3VtZW50c1xuICAgICAgZm9yIChjb25zdCBkb2Mgb2Ygc3RhdGUucHJvY2Vzc2VkX2RvY3MpIHtcbiAgICAgICAgaWYgKGVxLnNvdXJjZV9kb2N1bWVudF9pZHMuaW5jbHVkZXMoZG9jLmlkKSkge1xuICAgICAgICAgIGNvbnN0IHBhc3NhZ2VzID0gdGhpcy5leHRyYWN0UmVsZXZhbnRQYXNzYWdlcyhlcS5xdWVzdGlvbiwgZG9jLmNvbnRlbnQpO1xuICAgICAgICAgIGZvciAoY29uc3QgcGFzc2FnZSBvZiBwYXNzYWdlcykge1xuICAgICAgICAgICAgY29udGV4dHMucHVzaChwYXNzYWdlKTtcbiAgICAgICAgICAgIHJlbGV2YW5jZV9zY29yZXMucHVzaCgwLjgpOyAvLyBTaW1wbGlmaWVkIHNjb3JpbmdcbiAgICAgICAgICAgIGNvbnRleHRfc291cmNlcy5wdXNoKGRvYy5pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChjb250ZXh0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHF1ZXN0aW9uX2NvbnRleHRzLnB1c2goe1xuICAgICAgICAgIHF1ZXN0aW9uX2lkOiBlcS5pZCxcbiAgICAgICAgICBjb250ZXh0czogY29udGV4dHMuc2xpY2UoMCwgMyksIC8vIExpbWl0IHRvIHRvcCAzXG4gICAgICAgICAgcmVsZXZhbmNlX3Njb3JlczogcmVsZXZhbmNlX3Njb3Jlcy5zbGljZSgwLCAzKSxcbiAgICAgICAgICBjb250ZXh0X3NvdXJjZXM6IGNvbnRleHRfc291cmNlcy5zbGljZSgwLCAzKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHsgcXVlc3Rpb25fY29udGV4dHMgfTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBleHRyYWN0UmVsZXZhbnRQYXNzYWdlcyhxdWVzdGlvbjogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgLy8gRXh0cmFjdCBtZWFuaW5nZnVsIHBhc3NhZ2VzIGZyb20gdGhlIGNvbnRlbnRcbiAgICBjb25zdCBwYXNzYWdlczogc3RyaW5nW10gPSBbXTtcbiAgICBcbiAgICAvLyBTcGxpdCBjb250ZW50IGludG8gcGFyYWdyYXBocyAoYnkgZG91YmxlIG5ld2xpbmVzIG9yIHNpbmdsZSBuZXdsaW5lcylcbiAgICBjb25zdCBwYXJhZ3JhcGhzID0gY29udGVudC5zcGxpdCgvXFxuXFxuKy8pLmZpbHRlcihwID0+IHAudHJpbSgpLmxlbmd0aCA+IDUwKTtcbiAgICBcbiAgICBpZiAocGFyYWdyYXBocy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIElmIG5vIHBhcmFncmFwaHMsIHNwbGl0IGJ5IHNpbmdsZSBuZXdsaW5lc1xuICAgICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKS5maWx0ZXIobCA9PiBsLnRyaW0oKS5sZW5ndGggPiAyMCk7XG4gICAgICBcbiAgICAgIC8vIEdyb3VwIGxpbmVzIGludG8gY2h1bmtzIG9mIH41MDAgY2hhcmFjdGVyc1xuICAgICAgbGV0IGN1cnJlbnRQYXNzYWdlID0gJyc7XG4gICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRQYXNzYWdlLmxlbmd0aCArIGxpbmUubGVuZ3RoID4gNTAwICYmIGN1cnJlbnRQYXNzYWdlLmxlbmd0aCA+IDEwMCkge1xuICAgICAgICAgIHBhc3NhZ2VzLnB1c2goY3VycmVudFBhc3NhZ2UudHJpbSgpKTtcbiAgICAgICAgICBjdXJyZW50UGFzc2FnZSA9IGxpbmU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VycmVudFBhc3NhZ2UgKz0gKGN1cnJlbnRQYXNzYWdlID8gJ1xcbicgOiAnJykgKyBsaW5lO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudFBhc3NhZ2UudHJpbSgpLmxlbmd0aCA+IDUwKSB7XG4gICAgICAgIHBhc3NhZ2VzLnB1c2goY3VycmVudFBhc3NhZ2UudHJpbSgpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVXNlIHBhcmFncmFwaHMgYXMgcGFzc2FnZXMsIGJ1dCBlbnN1cmUgdGhleSdyZSBub3QgdG9vIHNob3J0XG4gICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgcGFyYWdyYXBocykge1xuICAgICAgICBpZiAocGFyYS50cmltKCkubGVuZ3RoID4gNTApIHtcbiAgICAgICAgICAvLyBMaW1pdCBwYXNzYWdlIGxlbmd0aCB0byB+MTAwMCBjaGFyYWN0ZXJzIGZvciBiZXR0ZXIgY29udGV4dFxuICAgICAgICAgIGlmIChwYXJhLmxlbmd0aCA+IDEwMDApIHtcbiAgICAgICAgICAgIHBhc3NhZ2VzLnB1c2gocGFyYS5zdWJzdHJpbmcoMCwgMTAwMCkgKyAnLi4uJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhc3NhZ2VzLnB1c2gocGFyYS50cmltKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBJZiB3ZSBzdGlsbCBkb24ndCBoYXZlIGdvb2QgcGFzc2FnZXMsIGNyZWF0ZSBjaHVua3MgZnJvbSB0aGUgY29udGVudFxuICAgIGlmIChwYXNzYWdlcy5sZW5ndGggPT09IDAgJiYgY29udGVudC5sZW5ndGggPiAxMDApIHtcbiAgICAgIGNvbnN0IGNodW5rU2l6ZSA9IDUwMDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29udGVudC5sZW5ndGg7IGkgKz0gY2h1bmtTaXplKSB7XG4gICAgICAgIGNvbnN0IGNodW5rID0gY29udGVudC5zdWJzdHJpbmcoaSwgTWF0aC5taW4oaSArIGNodW5rU2l6ZSwgY29udGVudC5sZW5ndGgpKTtcbiAgICAgICAgaWYgKGNodW5rLnRyaW0oKS5sZW5ndGggPiA1MCkge1xuICAgICAgICAgIHBhc3NhZ2VzLnB1c2goY2h1bmsudHJpbSgpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBSZXR1cm4gdXAgdG8gMyBtb3N0IHJlbGV2YW50IHBhc3NhZ2VzIChpbiBhIHJlYWwgaW1wbGVtZW50YXRpb24sIHlvdSdkIHVzZSBlbWJlZGRpbmdzKVxuICAgIHJldHVybiBwYXNzYWdlcy5zbGljZSgwLCAzKTtcbiAgfVxuICBcbiAgLy8gTWFpbiBleGVjdXRpb24gbWV0aG9kXG4gIGFzeW5jIHJ1bihkb2N1bWVudHM6IERvY3VtZW50W10pOiBQcm9taXNlPEdlbmVyYXRpb25SZXN1bHQ+IHtcbiAgICBjb25zdCBpbml0aWFsU3RhdGU6IFJBR0FTU3RhdGUgPSB7XG4gICAgICBkb2N1bWVudHMsXG4gICAgICBwcm9jZXNzZWRfZG9jczogW10sXG4gICAgICBldm9sdmVkX3F1ZXN0aW9uczogW10sXG4gICAgICBxdWVzdGlvbl9hbnN3ZXJzOiBbXSxcbiAgICAgIHF1ZXN0aW9uX2NvbnRleHRzOiBbXSxcbiAgICAgIGVycm9yczogW11cbiAgICB9O1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmdyYXBoLmludm9rZShpbml0aWFsU3RhdGUpO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBldm9sdmVkX3F1ZXN0aW9uczogcmVzdWx0LmV2b2x2ZWRfcXVlc3Rpb25zLFxuICAgICAgICBxdWVzdGlvbl9hbnN3ZXJzOiByZXN1bHQucXVlc3Rpb25fYW5zd2VycyxcbiAgICAgICAgcXVlc3Rpb25fY29udGV4dHM6IHJlc3VsdC5xdWVzdGlvbl9jb250ZXh0cyxcbiAgICAgICAgZ2VuZXJhdGlvbl9tZXRhZGF0YToge1xuICAgICAgICAgIHRvdGFsX3F1ZXN0aW9uczogcmVzdWx0LmV2b2x2ZWRfcXVlc3Rpb25zLmxlbmd0aCxcbiAgICAgICAgICBldm9sdXRpb25fdHlwZXNfY291bnQ6IHtcbiAgICAgICAgICAgIHNpbXBsZTogcmVzdWx0LmV2b2x2ZWRfcXVlc3Rpb25zLmZpbHRlcihxID0+IHEuZXZvbHV0aW9uX3R5cGUgPT09ICdzaW1wbGUnKS5sZW5ndGgsXG4gICAgICAgICAgICBtdWx0aV9jb250ZXh0OiByZXN1bHQuZXZvbHZlZF9xdWVzdGlvbnMuZmlsdGVyKHEgPT4gcS5ldm9sdXRpb25fdHlwZSA9PT0gJ211bHRpX2NvbnRleHQnKS5sZW5ndGgsXG4gICAgICAgICAgICByZWFzb25pbmc6IHJlc3VsdC5ldm9sdmVkX3F1ZXN0aW9ucy5maWx0ZXIocSA9PiBxLmV2b2x1dGlvbl90eXBlID09PSAncmVhc29uaW5nJykubGVuZ3RoXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwcm9jZXNzaW5nX2Vycm9yczogcmVzdWx0LmVycm9ycyxcbiAgICAgICAgICBnZW5lcmF0aW9uX3RpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgR2VuZXJhdGlvbiBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG59XG5cbiJdLCJuYW1lcyI6WyJDaGF0UHJvbXB0VGVtcGxhdGUiLCJ2NCIsInV1aWR2NCIsIlNpbXBsZUdyYXBoIiwiYWRkTm9kZSIsIm5hbWUiLCJmdW5jIiwibm9kZXMiLCJzZXQiLCJhZGRFZGdlIiwiZnJvbSIsInRvIiwiZWRnZXMiLCJzZXRTdGFydCIsIm5vZGUiLCJzdGFydE5vZGUiLCJpbnZva2UiLCJpbml0aWFsU3RhdGUiLCJjdXJyZW50U3RhdGUiLCJjdXJyZW50Tm9kZSIsIm5vZGVGdW5jIiwiZ2V0IiwiRXJyb3IiLCJwYXJ0aWFsU3RhdGUiLCJNYXAiLCJSQUdBU0xhbmdHcmFwaCIsImNvbnN0cnVjdG9yIiwibGxtIiwiZ3JhcGgiLCJjcmVhdGVHcmFwaCIsIndvcmtmbG93IiwicHJvY2Vzc0RvY3VtZW50cyIsImJpbmQiLCJzaW1wbGVFdm9sdXRpb24iLCJtdWx0aUNvbnRleHRFdm9sdXRpb24iLCJyZWFzb25pbmdFdm9sdXRpb24iLCJnZW5lcmF0ZUFuc3dlcnMiLCJyZXRyaWV2ZUNvbnRleHRzIiwic3RhdGUiLCJwcm9jZXNzZWRfZG9jcyIsImkiLCJkb2N1bWVudHMiLCJsZW5ndGgiLCJkb2MiLCJxdWVzdGlvbnMiLCJleHRyYWN0SW5pdGlhbFF1ZXN0aW9ucyIsInBhZ2VDb250ZW50IiwicHVzaCIsImlkIiwiY29udGVudCIsIm1ldGFkYXRhIiwiaW5pdGlhbF9xdWVzdGlvbnMiLCJlcnJvciIsImVycm9ycyIsInByb21wdCIsImZyb21UZW1wbGF0ZSIsImNoYWluIiwicGlwZSIsImNvbnRlbnRMaW5lcyIsInNwbGl0IiwibWFpbkNvbnRlbnQiLCJzdGFydEluZGV4IiwiTWF0aCIsIm1pbiIsImxpbmUiLCJ0cmltIiwibWF0Y2giLCJzbGljZSIsImpvaW4iLCJyZXNwb25zZSIsInRvU3RyaW5nIiwibWFwIiwicSIsImZpbHRlciIsImVuZHNXaXRoIiwiZXZvbHZlZF9xdWVzdGlvbnMiLCJxdWVzdGlvbiIsImV2b2x2ZWQiLCJldm9sdmVRdWVzdGlvblNpbXBsZSIsImV2b2x1dGlvbl90eXBlIiwiY29tcGxleGl0eV9zY29yZSIsInNvdXJjZV9kb2N1bWVudF9pZHMiLCJvcmlnaW5hbF9xdWVzdGlvbiIsImV2b2x1dGlvbl90aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJjb250ZXh0IiwiaiIsImRvYzEiLCJkb2MyIiwiZXZvbHZlUXVlc3Rpb25NdWx0aUNvbnRleHQiLCJyZXF1aXJlc19tdWx0aXBsZV9jb250ZXh0cyIsImNvbnRleHQxIiwiY29udGV4dDIiLCJleGlzdGluZ1F1ZXN0aW9ucyIsImVxIiwic291cmNlQ29udGV4dCIsImluY2x1ZGVzIiwiZXZvbHZlUXVlc3Rpb25SZWFzb25pbmciLCJyZXF1aXJlc19yZWFzb25pbmciLCJxdWVzdGlvbl9hbnN3ZXJzIiwiY29udGV4dHMiLCJhbnN3ZXIiLCJnZW5lcmF0ZUFuc3dlciIsInF1ZXN0aW9uX2lkIiwiY29uZmlkZW5jZV9zY29yZSIsInNvdXJjZV9kb2N1bWVudHMiLCJjb21iaW5lZENvbnRleHQiLCJxdWVzdGlvbl9jb250ZXh0cyIsInJlbGV2YW5jZV9zY29yZXMiLCJjb250ZXh0X3NvdXJjZXMiLCJwYXNzYWdlcyIsImV4dHJhY3RSZWxldmFudFBhc3NhZ2VzIiwicGFzc2FnZSIsInBhcmFncmFwaHMiLCJwIiwibGluZXMiLCJsIiwiY3VycmVudFBhc3NhZ2UiLCJwYXJhIiwic3Vic3RyaW5nIiwiY2h1bmtTaXplIiwiY2h1bmsiLCJydW4iLCJyZXN1bHQiLCJnZW5lcmF0aW9uX21ldGFkYXRhIiwidG90YWxfcXVlc3Rpb25zIiwiZXZvbHV0aW9uX3R5cGVzX2NvdW50Iiwic2ltcGxlIiwibXVsdGlfY29udGV4dCIsInJlYXNvbmluZyIsInByb2Nlc3NpbmdfZXJyb3JzIiwiZ2VuZXJhdGlvbl90aW1lc3RhbXAiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/ragas/langgraph-implementation.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/validation.ts":
/*!*******************************!*\
  !*** ./src/lib/validation.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DocumentContentSchema: () => (/* binding */ DocumentContentSchema),\n/* harmony export */   FileValidationSchema: () => (/* binding */ FileValidationSchema),\n/* harmony export */   GenerateRequestSchema: () => (/* binding */ GenerateRequestSchema),\n/* harmony export */   GenerationConfigSchema: () => (/* binding */ GenerationConfigSchema),\n/* harmony export */   RateLimiter: () => (/* binding */ RateLimiter),\n/* harmony export */   globalRateLimiter: () => (/* binding */ globalRateLimiter),\n/* harmony export */   validateDocumentContent: () => (/* binding */ validateDocumentContent),\n/* harmony export */   validateFile: () => (/* binding */ validateFile),\n/* harmony export */   validateGenerationConfig: () => (/* binding */ validateGenerationConfig)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n\n// Generation Configuration Schema\nconst GenerationConfigSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    maxQuestions: zod__WEBPACK_IMPORTED_MODULE_0__.number().min(1).max(50).default(10),\n    evolutionTypes: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n        \"simple\",\n        \"multi_context\",\n        \"reasoning\"\n    ])).default([\n        \"simple\",\n        \"multi_context\",\n        \"reasoning\"\n    ]),\n    complexityTarget: zod__WEBPACK_IMPORTED_MODULE_0__.number().min(1).max(10).default(5),\n    language: zod__WEBPACK_IMPORTED_MODULE_0__.string().default(\"en\"),\n    includeMetadata: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().default(true),\n    openaiApiKey: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\n// File Validation Schema (kept for reference but using custom validation instead)\nconst FileValidationSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1),\n    size: zod__WEBPACK_IMPORTED_MODULE_0__.number().max(10 * 1024 * 1024),\n    type: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional() // Made optional since MIME types are unreliable\n});\n// Document Content Schema\nconst DocumentContentSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    content: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(100, \"Document content must be at least 100 characters\"),\n    metadata: zod__WEBPACK_IMPORTED_MODULE_0__.record(zod__WEBPACK_IMPORTED_MODULE_0__.any()).optional()\n});\n// API Request Schema\nconst GenerateRequestSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    documents: zod__WEBPACK_IMPORTED_MODULE_0__.array(DocumentContentSchema).min(1, \"At least one document is required\"),\n    config: GenerationConfigSchema.optional()\n});\n// Validation Functions\nfunction validateFile(file) {\n    // Check file extension as well as MIME type\n    const fileExtension = file.name.toLowerCase().split(\".\").pop();\n    const validExtensions = [\n        \"txt\",\n        \"md\",\n        \"pdf\"\n    ];\n    if (!validExtensions.includes(fileExtension || \"\")) {\n        return {\n            valid: false,\n            error: \"Invalid file type. Only .txt, .md, and .pdf files are allowed.\"\n        };\n    }\n    // Check file size\n    if (file.size > 10 * 1024 * 1024) {\n        return {\n            valid: false,\n            error: \"File too large (max 10MB)\"\n        };\n    }\n    // If extension is valid, don't strictly check MIME type as it can be unreliable for .md files\n    return {\n        valid: true\n    };\n}\nfunction validateDocumentContent(content) {\n    try {\n        DocumentContentSchema.parse({\n            content\n        });\n        return {\n            valid: true\n        };\n    } catch (error) {\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_1__.ZodError) {\n            return {\n                valid: false,\n                error: error.errors[0].message\n            };\n        }\n        return {\n            valid: false,\n            error: \"Invalid document content\"\n        };\n    }\n}\nfunction validateGenerationConfig(config) {\n    try {\n        const validatedConfig = GenerationConfigSchema.parse(config);\n        return {\n            valid: true,\n            data: validatedConfig\n        };\n    } catch (error) {\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_1__.ZodError) {\n            return {\n                valid: false,\n                error: error.errors[0].message\n            };\n        }\n        return {\n            valid: false,\n            error: \"Invalid configuration\"\n        };\n    }\n}\n// Rate Limiting Utilities\nclass RateLimiter {\n    constructor(maxRequests = 100, windowMs = 15 * 60 * 1000 // 15 minutes\n    ){\n        this.maxRequests = maxRequests;\n        this.windowMs = windowMs;\n        this.requests = new Map();\n    }\n    isAllowed(identifier) {\n        const now = Date.now();\n        const requests = this.requests.get(identifier) || [];\n        // Remove old requests outside the window\n        const validRequests = requests.filter((time)=>now - time < this.windowMs);\n        if (validRequests.length >= this.maxRequests) {\n            return false;\n        }\n        validRequests.push(now);\n        this.requests.set(identifier, validRequests);\n        return true;\n    }\n    getRemainingRequests(identifier) {\n        const now = Date.now();\n        const requests = this.requests.get(identifier) || [];\n        const validRequests = requests.filter((time)=>now - time < this.windowMs);\n        return Math.max(0, this.maxRequests - validRequests.length);\n    }\n}\n// Global rate limiter instance\nconst globalRateLimiter = new RateLimiter();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ZhbGlkYXRpb24udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBd0I7QUFFeEIsa0NBQWtDO0FBQzNCLE1BQU1DLHlCQUF5QkQsdUNBQVEsQ0FBQztJQUM3Q0csY0FBY0gsdUNBQVEsR0FBR0ssR0FBRyxDQUFDLEdBQUdDLEdBQUcsQ0FBQyxJQUFJQyxPQUFPLENBQUM7SUFDaERDLGdCQUFnQlIsc0NBQU8sQ0FBQ0Esd0NBQU0sQ0FBQztRQUFDO1FBQVU7UUFBaUI7S0FBWSxHQUFHTyxPQUFPLENBQUM7UUFBQztRQUFVO1FBQWlCO0tBQVk7SUFDMUhJLGtCQUFrQlgsdUNBQVEsR0FBR0ssR0FBRyxDQUFDLEdBQUdDLEdBQUcsQ0FBQyxJQUFJQyxPQUFPLENBQUM7SUFDcERLLFVBQVVaLHVDQUFRLEdBQUdPLE9BQU8sQ0FBQztJQUM3Qk8saUJBQWlCZCx3Q0FBUyxHQUFHTyxPQUFPLENBQUM7SUFDckNTLGNBQWNoQix1Q0FBUSxHQUFHaUIsUUFBUTtBQUNuQyxHQUFHO0FBRUgsa0ZBQWtGO0FBQzNFLE1BQU1DLHVCQUF1QmxCLHVDQUFRLENBQUM7SUFDM0NtQixNQUFNbkIsdUNBQVEsR0FBR0ssR0FBRyxDQUFDO0lBQ3JCZSxNQUFNcEIsdUNBQVEsR0FBR00sR0FBRyxDQUFDLEtBQUssT0FBTztJQUNqQ2UsTUFBTXJCLHVDQUFRLEdBQUdpQixRQUFRLEdBQUcsZ0RBQWdEO0FBQzlFLEdBQUc7QUFFSCwwQkFBMEI7QUFDbkIsTUFBTUssd0JBQXdCdEIsdUNBQVEsQ0FBQztJQUM1Q3VCLFNBQVN2Qix1Q0FBUSxHQUFHSyxHQUFHLENBQUMsS0FBSztJQUM3Qm1CLFVBQVV4Qix1Q0FBUSxDQUFDQSxvQ0FBSyxJQUFJaUIsUUFBUTtBQUN0QyxHQUFHO0FBRUgscUJBQXFCO0FBQ2QsTUFBTVUsd0JBQXdCM0IsdUNBQVEsQ0FBQztJQUM1QzRCLFdBQVc1QixzQ0FBTyxDQUFDc0IsdUJBQXVCakIsR0FBRyxDQUFDLEdBQUc7SUFDakR3QixRQUFRNUIsdUJBQXVCZ0IsUUFBUTtBQUN6QyxHQUFHO0FBRUgsdUJBQXVCO0FBQ2hCLFNBQVNhLGFBQWFDLElBQVU7SUFDckMsNENBQTRDO0lBQzVDLE1BQU1DLGdCQUFnQkQsS0FBS1osSUFBSSxDQUFDYyxXQUFXLEdBQUdDLEtBQUssQ0FBQyxLQUFLQyxHQUFHO0lBQzVELE1BQU1DLGtCQUFrQjtRQUFDO1FBQU87UUFBTTtLQUFNO0lBRTVDLElBQUksQ0FBQ0EsZ0JBQWdCQyxRQUFRLENBQUNMLGlCQUFpQixLQUFLO1FBQ2xELE9BQU87WUFBRU0sT0FBTztZQUFPQyxPQUFPO1FBQWlFO0lBQ2pHO0lBRUEsa0JBQWtCO0lBQ2xCLElBQUlSLEtBQUtYLElBQUksR0FBRyxLQUFLLE9BQU8sTUFBTTtRQUNoQyxPQUFPO1lBQUVrQixPQUFPO1lBQU9DLE9BQU87UUFBNEI7SUFDNUQ7SUFFQSw4RkFBOEY7SUFDOUYsT0FBTztRQUFFRCxPQUFPO0lBQUs7QUFDdkI7QUFFTyxTQUFTRSx3QkFBd0JqQixPQUFlO0lBQ3JELElBQUk7UUFDRkQsc0JBQXNCbUIsS0FBSyxDQUFDO1lBQUVsQjtRQUFRO1FBQ3RDLE9BQU87WUFBRWUsT0FBTztRQUFLO0lBQ3ZCLEVBQUUsT0FBT0MsT0FBTztRQUNkLElBQUlBLGlCQUFpQnZDLHlDQUFVLEVBQUU7WUFDL0IsT0FBTztnQkFBRXNDLE9BQU87Z0JBQU9DLE9BQU9BLE1BQU1JLE1BQU0sQ0FBQyxFQUFFLENBQUNDLE9BQU87WUFBQztRQUN4RDtRQUNBLE9BQU87WUFBRU4sT0FBTztZQUFPQyxPQUFPO1FBQTJCO0lBQzNEO0FBQ0Y7QUFFTyxTQUFTTSx5QkFBeUJoQixNQUFXO0lBQ2xELElBQUk7UUFDRixNQUFNaUIsa0JBQWtCN0MsdUJBQXVCd0MsS0FBSyxDQUFDWjtRQUNyRCxPQUFPO1lBQUVTLE9BQU87WUFBTVMsTUFBTUQ7UUFBZ0I7SUFDOUMsRUFBRSxPQUFPUCxPQUFPO1FBQ2QsSUFBSUEsaUJBQWlCdkMseUNBQVUsRUFBRTtZQUMvQixPQUFPO2dCQUFFc0MsT0FBTztnQkFBT0MsT0FBT0EsTUFBTUksTUFBTSxDQUFDLEVBQUUsQ0FBQ0MsT0FBTztZQUFDO1FBQ3hEO1FBQ0EsT0FBTztZQUFFTixPQUFPO1lBQU9DLE9BQU87UUFBd0I7SUFDeEQ7QUFDRjtBQUVBLDBCQUEwQjtBQUNuQixNQUFNUztJQUdYQyxZQUNFLGNBQThCLEdBQUcsRUFDakMsV0FBMkIsS0FBSyxLQUFLLEtBQUssYUFBYTtJQUFkLENBQ3pDO2FBRlFDLGNBQUFBO2FBQ0FDLFdBQUFBO2FBSkZDLFdBQWtDLElBQUlDO0lBSzNDO0lBRUhDLFVBQVVDLFVBQWtCLEVBQVc7UUFDckMsTUFBTUMsTUFBTUMsS0FBS0QsR0FBRztRQUNwQixNQUFNSixXQUFXLElBQUksQ0FBQ0EsUUFBUSxDQUFDTSxHQUFHLENBQUNILGVBQWUsRUFBRTtRQUVwRCx5Q0FBeUM7UUFDekMsTUFBTUksZ0JBQWdCUCxTQUFTUSxNQUFNLENBQUNDLENBQUFBLE9BQVFMLE1BQU1LLE9BQU8sSUFBSSxDQUFDVixRQUFRO1FBRXhFLElBQUlRLGNBQWNHLE1BQU0sSUFBSSxJQUFJLENBQUNaLFdBQVcsRUFBRTtZQUM1QyxPQUFPO1FBQ1Q7UUFFQVMsY0FBY0ksSUFBSSxDQUFDUDtRQUNuQixJQUFJLENBQUNKLFFBQVEsQ0FBQ1ksR0FBRyxDQUFDVCxZQUFZSTtRQUM5QixPQUFPO0lBQ1Q7SUFFQU0scUJBQXFCVixVQUFrQixFQUFVO1FBQy9DLE1BQU1DLE1BQU1DLEtBQUtELEdBQUc7UUFDcEIsTUFBTUosV0FBVyxJQUFJLENBQUNBLFFBQVEsQ0FBQ00sR0FBRyxDQUFDSCxlQUFlLEVBQUU7UUFDcEQsTUFBTUksZ0JBQWdCUCxTQUFTUSxNQUFNLENBQUNDLENBQUFBLE9BQVFMLE1BQU1LLE9BQU8sSUFBSSxDQUFDVixRQUFRO1FBQ3hFLE9BQU9lLEtBQUs1RCxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUM0QyxXQUFXLEdBQUdTLGNBQWNHLE1BQU07SUFDNUQ7QUFDRjtBQUVBLCtCQUErQjtBQUN4QixNQUFNSyxvQkFBb0IsSUFBSW5CLGNBQWMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYWdhcy1sYW5nZ3JhcGgtdmVyY2VsLy4vc3JjL2xpYi92YWxpZGF0aW9uLnRzPzQ2MGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5cbi8vIEdlbmVyYXRpb24gQ29uZmlndXJhdGlvbiBTY2hlbWFcbmV4cG9ydCBjb25zdCBHZW5lcmF0aW9uQ29uZmlnU2NoZW1hID0gei5vYmplY3Qoe1xuICBtYXhRdWVzdGlvbnM6IHoubnVtYmVyKCkubWluKDEpLm1heCg1MCkuZGVmYXVsdCgxMCksXG4gIGV2b2x1dGlvblR5cGVzOiB6LmFycmF5KHouZW51bShbJ3NpbXBsZScsICdtdWx0aV9jb250ZXh0JywgJ3JlYXNvbmluZyddKSkuZGVmYXVsdChbJ3NpbXBsZScsICdtdWx0aV9jb250ZXh0JywgJ3JlYXNvbmluZyddKSxcbiAgY29tcGxleGl0eVRhcmdldDogei5udW1iZXIoKS5taW4oMSkubWF4KDEwKS5kZWZhdWx0KDUpLFxuICBsYW5ndWFnZTogei5zdHJpbmcoKS5kZWZhdWx0KCdlbicpLFxuICBpbmNsdWRlTWV0YWRhdGE6IHouYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gIG9wZW5haUFwaUtleTogei5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcblxuLy8gRmlsZSBWYWxpZGF0aW9uIFNjaGVtYSAoa2VwdCBmb3IgcmVmZXJlbmNlIGJ1dCB1c2luZyBjdXN0b20gdmFsaWRhdGlvbiBpbnN0ZWFkKVxuZXhwb3J0IGNvbnN0IEZpbGVWYWxpZGF0aW9uU2NoZW1hID0gei5vYmplY3Qoe1xuICBuYW1lOiB6LnN0cmluZygpLm1pbigxKSxcbiAgc2l6ZTogei5udW1iZXIoKS5tYXgoMTAgKiAxMDI0ICogMTAyNCksIC8vIDEwTUIgbWF4XG4gIHR5cGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSAvLyBNYWRlIG9wdGlvbmFsIHNpbmNlIE1JTUUgdHlwZXMgYXJlIHVucmVsaWFibGVcbn0pO1xuXG4vLyBEb2N1bWVudCBDb250ZW50IFNjaGVtYVxuZXhwb3J0IGNvbnN0IERvY3VtZW50Q29udGVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgY29udGVudDogei5zdHJpbmcoKS5taW4oMTAwLCAnRG9jdW1lbnQgY29udGVudCBtdXN0IGJlIGF0IGxlYXN0IDEwMCBjaGFyYWN0ZXJzJyksXG4gIG1ldGFkYXRhOiB6LnJlY29yZCh6LmFueSgpKS5vcHRpb25hbCgpXG59KTtcblxuLy8gQVBJIFJlcXVlc3QgU2NoZW1hXG5leHBvcnQgY29uc3QgR2VuZXJhdGVSZXF1ZXN0U2NoZW1hID0gei5vYmplY3Qoe1xuICBkb2N1bWVudHM6IHouYXJyYXkoRG9jdW1lbnRDb250ZW50U2NoZW1hKS5taW4oMSwgJ0F0IGxlYXN0IG9uZSBkb2N1bWVudCBpcyByZXF1aXJlZCcpLFxuICBjb25maWc6IEdlbmVyYXRpb25Db25maWdTY2hlbWEub3B0aW9uYWwoKVxufSk7XG5cbi8vIFZhbGlkYXRpb24gRnVuY3Rpb25zXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVGaWxlKGZpbGU6IEZpbGUpOiB7IHZhbGlkOiBib29sZWFuOyBlcnJvcj86IHN0cmluZyB9IHtcbiAgLy8gQ2hlY2sgZmlsZSBleHRlbnNpb24gYXMgd2VsbCBhcyBNSU1FIHR5cGVcbiAgY29uc3QgZmlsZUV4dGVuc2lvbiA9IGZpbGUubmFtZS50b0xvd2VyQ2FzZSgpLnNwbGl0KCcuJykucG9wKCk7XG4gIGNvbnN0IHZhbGlkRXh0ZW5zaW9ucyA9IFsndHh0JywgJ21kJywgJ3BkZiddO1xuICBcbiAgaWYgKCF2YWxpZEV4dGVuc2lvbnMuaW5jbHVkZXMoZmlsZUV4dGVuc2lvbiB8fCAnJykpIHtcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yOiAnSW52YWxpZCBmaWxlIHR5cGUuIE9ubHkgLnR4dCwgLm1kLCBhbmQgLnBkZiBmaWxlcyBhcmUgYWxsb3dlZC4nIH07XG4gIH1cbiAgXG4gIC8vIENoZWNrIGZpbGUgc2l6ZVxuICBpZiAoZmlsZS5zaXplID4gMTAgKiAxMDI0ICogMTAyNCkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3I6ICdGaWxlIHRvbyBsYXJnZSAobWF4IDEwTUIpJyB9O1xuICB9XG4gIFxuICAvLyBJZiBleHRlbnNpb24gaXMgdmFsaWQsIGRvbid0IHN0cmljdGx5IGNoZWNrIE1JTUUgdHlwZSBhcyBpdCBjYW4gYmUgdW5yZWxpYWJsZSBmb3IgLm1kIGZpbGVzXG4gIHJldHVybiB7IHZhbGlkOiB0cnVlIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZURvY3VtZW50Q29udGVudChjb250ZW50OiBzdHJpbmcpOiB7IHZhbGlkOiBib29sZWFuOyBlcnJvcj86IHN0cmluZyB9IHtcbiAgdHJ5IHtcbiAgICBEb2N1bWVudENvbnRlbnRTY2hlbWEucGFyc2UoeyBjb250ZW50IH0pO1xuICAgIHJldHVybiB7IHZhbGlkOiB0cnVlIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xuICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcjogZXJyb3IuZXJyb3JzWzBdLm1lc3NhZ2UgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcjogJ0ludmFsaWQgZG9jdW1lbnQgY29udGVudCcgfTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVHZW5lcmF0aW9uQ29uZmlnKGNvbmZpZzogYW55KTogeyB2YWxpZDogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmc7IGRhdGE/OiBhbnkgfSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdmFsaWRhdGVkQ29uZmlnID0gR2VuZXJhdGlvbkNvbmZpZ1NjaGVtYS5wYXJzZShjb25maWcpO1xuICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiB2YWxpZGF0ZWRDb25maWcgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiB6LlpvZEVycm9yKSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yOiBlcnJvci5lcnJvcnNbMF0ubWVzc2FnZSB9O1xuICAgIH1cbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yOiAnSW52YWxpZCBjb25maWd1cmF0aW9uJyB9O1xuICB9XG59XG5cbi8vIFJhdGUgTGltaXRpbmcgVXRpbGl0aWVzXG5leHBvcnQgY2xhc3MgUmF0ZUxpbWl0ZXIge1xuICBwcml2YXRlIHJlcXVlc3RzOiBNYXA8c3RyaW5nLCBudW1iZXJbXT4gPSBuZXcgTWFwKCk7XG4gIFxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIG1heFJlcXVlc3RzOiBudW1iZXIgPSAxMDAsXG4gICAgcHJpdmF0ZSB3aW5kb3dNczogbnVtYmVyID0gMTUgKiA2MCAqIDEwMDAgLy8gMTUgbWludXRlc1xuICApIHt9XG4gIFxuICBpc0FsbG93ZWQoaWRlbnRpZmllcjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCByZXF1ZXN0cyA9IHRoaXMucmVxdWVzdHMuZ2V0KGlkZW50aWZpZXIpIHx8IFtdO1xuICAgIFxuICAgIC8vIFJlbW92ZSBvbGQgcmVxdWVzdHMgb3V0c2lkZSB0aGUgd2luZG93XG4gICAgY29uc3QgdmFsaWRSZXF1ZXN0cyA9IHJlcXVlc3RzLmZpbHRlcih0aW1lID0+IG5vdyAtIHRpbWUgPCB0aGlzLndpbmRvd01zKTtcbiAgICBcbiAgICBpZiAodmFsaWRSZXF1ZXN0cy5sZW5ndGggPj0gdGhpcy5tYXhSZXF1ZXN0cykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICB2YWxpZFJlcXVlc3RzLnB1c2gobm93KTtcbiAgICB0aGlzLnJlcXVlc3RzLnNldChpZGVudGlmaWVyLCB2YWxpZFJlcXVlc3RzKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBcbiAgZ2V0UmVtYWluaW5nUmVxdWVzdHMoaWRlbnRpZmllcjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IHJlcXVlc3RzID0gdGhpcy5yZXF1ZXN0cy5nZXQoaWRlbnRpZmllcikgfHwgW107XG4gICAgY29uc3QgdmFsaWRSZXF1ZXN0cyA9IHJlcXVlc3RzLmZpbHRlcih0aW1lID0+IG5vdyAtIHRpbWUgPCB0aGlzLndpbmRvd01zKTtcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgdGhpcy5tYXhSZXF1ZXN0cyAtIHZhbGlkUmVxdWVzdHMubGVuZ3RoKTtcbiAgfVxufVxuXG4vLyBHbG9iYWwgcmF0ZSBsaW1pdGVyIGluc3RhbmNlXG5leHBvcnQgY29uc3QgZ2xvYmFsUmF0ZUxpbWl0ZXIgPSBuZXcgUmF0ZUxpbWl0ZXIoKTtcblxuIl0sIm5hbWVzIjpbInoiLCJHZW5lcmF0aW9uQ29uZmlnU2NoZW1hIiwib2JqZWN0IiwibWF4UXVlc3Rpb25zIiwibnVtYmVyIiwibWluIiwibWF4IiwiZGVmYXVsdCIsImV2b2x1dGlvblR5cGVzIiwiYXJyYXkiLCJlbnVtIiwiY29tcGxleGl0eVRhcmdldCIsImxhbmd1YWdlIiwic3RyaW5nIiwiaW5jbHVkZU1ldGFkYXRhIiwiYm9vbGVhbiIsIm9wZW5haUFwaUtleSIsIm9wdGlvbmFsIiwiRmlsZVZhbGlkYXRpb25TY2hlbWEiLCJuYW1lIiwic2l6ZSIsInR5cGUiLCJEb2N1bWVudENvbnRlbnRTY2hlbWEiLCJjb250ZW50IiwibWV0YWRhdGEiLCJyZWNvcmQiLCJhbnkiLCJHZW5lcmF0ZVJlcXVlc3RTY2hlbWEiLCJkb2N1bWVudHMiLCJjb25maWciLCJ2YWxpZGF0ZUZpbGUiLCJmaWxlIiwiZmlsZUV4dGVuc2lvbiIsInRvTG93ZXJDYXNlIiwic3BsaXQiLCJwb3AiLCJ2YWxpZEV4dGVuc2lvbnMiLCJpbmNsdWRlcyIsInZhbGlkIiwiZXJyb3IiLCJ2YWxpZGF0ZURvY3VtZW50Q29udGVudCIsInBhcnNlIiwiWm9kRXJyb3IiLCJlcnJvcnMiLCJtZXNzYWdlIiwidmFsaWRhdGVHZW5lcmF0aW9uQ29uZmlnIiwidmFsaWRhdGVkQ29uZmlnIiwiZGF0YSIsIlJhdGVMaW1pdGVyIiwiY29uc3RydWN0b3IiLCJtYXhSZXF1ZXN0cyIsIndpbmRvd01zIiwicmVxdWVzdHMiLCJNYXAiLCJpc0FsbG93ZWQiLCJpZGVudGlmaWVyIiwibm93IiwiRGF0ZSIsImdldCIsInZhbGlkUmVxdWVzdHMiLCJmaWx0ZXIiLCJ0aW1lIiwibGVuZ3RoIiwicHVzaCIsInNldCIsImdldFJlbWFpbmluZ1JlcXVlc3RzIiwiTWF0aCIsImdsb2JhbFJhdGVMaW1pdGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/validation.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod","vendor-chunks/uuid"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=%2Fhome%2Ffluff_baal%2Frepos%2FAim-Assignment-7-8%2FReal%20assignment%2007%2Fragas-langgraph-vercel%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Ffluff_baal%2Frepos%2FAim-Assignment-7-8%2FReal%20assignment%2007%2Fragas-langgraph-vercel&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();